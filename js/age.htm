<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Untitled</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="SynEdit HTML exporter" />
<style type="text/css">
<!--
body { color: #000000; background-color: #FFFFFF; }
.jscript1-comment { color: #008000; font-style: italic; }
.jscript1-event { }
.jscript1-identifier { }
.jscript1-non-reservedkeyword { }
.jscript1-number { color: #000080; }
.jscript1-reservedword { font-weight: bold; }
.jscript1-space { color: #008080; }
.jscript1-string { color: #800000; }
.jscript1-symbol { }
-->
</style>
</head>
<body>
<pre>
<code><span style="font: 10pt Courier New;">
<span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">debug</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;

</span><span class="jscript1-comment">//document.write('&lt;script src=&quot;/age/js/age_settings.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;');
</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style(height,</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">width,bgColor,bgImage,id,_class,left,top,position)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">DEFAULTS.style;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_style.height;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_style.width;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">bgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_style.bgColor;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">bgImage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_style.bgImage;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imagesPath</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imageName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.angle=</span><span class="jscript1-string">'0'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.zIndex=</span><span class="jscript1-number">0</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.isNull=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(e){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(e==</span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">|</span><span class="jscript1-space"> </span><span class="jscript1-identifier">e</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-space"> </span><span class="jscript1-symbol">|</span><span class="jscript1-space"> </span><span class="jscript1-identifier">e==</span><span class="jscript1-string">'null'</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(bgColor==</span><span class="jscript1-string">''</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-string">'transparent'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getImagePath</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(url){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'getImagePath this.bgImage:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImage+</span><span class="jscript1-string">' imageNam:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imageName+</span><span class="jscript1-string">' this.angle:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.angle+</span><span class="jscript1-string">' this.imagesPath:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imagesPath,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.isNull(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImage)){</span><span class="jscript1-space"> 
    		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">url</span><span class="jscript1-space"> </span><span class="jscript1-symbol">?</span><span class="jscript1-space"> </span><span class="jscript1-string">'url('</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImage+</span><span class="jscript1-string">')'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">;}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.isNull(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imagesPath)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">|</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.isNull(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imageName)))</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">path</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imagesPath+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.angle+</span><span class="jscript1-string">'_'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imageName;
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(url)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-string">'url('</span><span class="jscript1-symbol">+path+</span><span class="jscript1-string">')'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">path;</span><span class="jscript1-space"> 		
    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};

</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_style.id;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_style._class;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.position</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">position</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_style.position;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setPosition</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(pos){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(pos.left);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(pos.top);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setDomId</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(domid){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">domid;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.copy</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.height,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.width,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImage,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._class,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.position);
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">style.imagesPath=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imagesPath;
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">style.imageName=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imageName;
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">style.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.angle;
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">style.zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.zIndex;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setStyle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(s){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">s.height;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">s.width;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">s.bgColor;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImage=s.bgImage;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imageName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">s.imageName;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imagesPath</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">s.imagesPath;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(s.left);
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(s.top);
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">s.zIndex;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">   </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.loadFromJSON</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(s){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setStyle(s);
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.imagesPath</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.userImagePath+GameManager.key+</span><span class="jscript1-string">'/'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	 </span><span class="jscript1-comment">//   if(s.imageName) this.bgImage = this.imagesPath+this.angle+'_'+s.imageName;
</span><span class="jscript1-space">	 </span><span class="jscript1-comment">//   else this.bgImage=null;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(s.bgImage)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImage=s.bgImage;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
}
</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Item(id,name,count,visibility,style){
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">DEFAULTS.item;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.isItem=</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupBy=-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.owner=-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomIdPrefix</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.itemDomIdPrefix;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomId=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&gt;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomIdPrefix()+</span><span class="jscript1-string">'-'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_item.name;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.count</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">count</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_item.count;
</span><span class="jscript1-comment">//    this.styleInstancen = new Array(this.count);
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_item.visibility;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style=style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style();
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent={left:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,top:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,zIndex:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setPositionComponent=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(pos){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">pos;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getPositionComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setLeft</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(left){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(left);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_left;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.left.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,_left);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setTop</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(top){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(top);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_top;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.top.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,_top);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setZIndex=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(zIndex){
</span><span class="jscript1-space">    </span><span class="jscript1-comment">//	if(debug) Log('Item.setZIndex:'+zIndex,'d')
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">zIndex;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.zIndex.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,zIndex);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.copy</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cpItem=</span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Item(</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.count,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">cpItem.group=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group;
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">cpItem.groupBy</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupBy;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cpItem;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    
    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setVisibility=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(vsbl){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility=vsbl;
</span><span class="jscript1-space">    	
    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(vsbl){
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">imageName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.imageName;
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">bgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.bgColor;
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.visibility=</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">imageName=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.imageName;
</span><span class="jscript1-space">    		</span><span class="jscript1-non-reservedkeyword">bgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.bgColor;
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	
    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.imagesPath+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.angle+</span><span class="jscript1-string">'_'</span><span class="jscript1-symbol">+imageName;
</span><span class="jscript1-space">    	
    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setItemVisibilityIcon(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement.css({backgroundColor:bgColor});
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img_e</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement.children(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">).first();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(img_e)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img_e.attr(</span><span class="jscript1-string">'src'</span><span class="jscript1-symbol">,image_path);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setItemVisibilityIcon=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(vsbl){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(vsbl)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.children(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">).first().attr(</span><span class="jscript1-string">'src'</span><span class="jscript1-symbol">,AgeSettings.imagePath+AgeSettings.imageUnVisible);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.children(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">).first().attr(</span><span class="jscript1-string">'src'</span><span class="jscript1-symbol">,AgeSettings.imagePath+AgeSettings.imageVisible);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.sendItemVisibilityUpdate=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(vsbl){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.players[GameManager.instance.player];
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player_name=player.name;
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">domid=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement.attr(</span><span class="jscript1-string">'id'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setItemVisibilityIcon(vsbl);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">update</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'action=v&amp;i='</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id+</span><span class="jscript1-string">'&amp;dom='</span><span class="jscript1-symbol">+domid+</span><span class="jscript1-string">'&amp;player='</span><span class="jscript1-symbol">+player_name+</span><span class="jscript1-string">'&amp;v='</span><span class="jscript1-symbol">+vsbl+</span><span class="jscript1-string">'&amp;private='</span><span class="jscript1-symbol">+(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.owner==player.id);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Item send visibility update:'</span><span class="jscript1-symbol">+update,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    	</span><span class="jscript1-identifier">AgeUpdater.sendUpdate(update);
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){Log(</span><span class="jscript1-string">'Item.sendItemVisibilityUpdate() - '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createActionBar=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar==</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">    		
    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar=HTMLRenderer.div({_class:</span><span class="jscript1-string">'ItemActionBar'</span><span class="jscript1-symbol">}).css(</span><span class="jscript1-string">'display'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    		
    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.img({src:AgeSettings.imagePath+AgeSettings.imageUnVisible});
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.img({src:AgeSettings.imagePath+AgeSettings.imageVisible});
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'this.group.stacked:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.stacked,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img_s</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.img({src:AgeSettings.imagePath+</span><span class="jscript1-string">'stacked0.png'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    		
    		</span><span class="jscript1-identifier">img.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{_item.sendItemVisibilityUpdate(!_item.visibility);</span><span class="jscript1-space"> </span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">img_s.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{_item.group.sendGroupStackedUpdate(!_item.group.stacked,_item.id);</span><span class="jscript1-space"> </span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    		
    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.append(img);
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.append(img_s);
</span><span class="jscript1-space">    		
    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar);
</span><span class="jscript1-space">    		
    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    
    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bindAction</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar==</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createActionBar();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.css(</span><span class="jscript1-string">'display'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Item:bindAction visibility:'</span><span class="jscript1-symbol">+visibility,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(visibility==</span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.css({display:</span><span class="jscript1-string">'block'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.css({display:</span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(data){
</span><span class="jscript1-space"> 		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(data.visibility){
</span><span class="jscript1-space"> 			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.bgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.style.bgColor;
</span><span class="jscript1-space"> 			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.imageName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.style.imageName;
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game.players[game.player].angle;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setVisibility(data.visibility);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">     </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.loadFromJSON</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(i){
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i.name;
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.count</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i.count;
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i.id;
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Item.lade from JSON id:'</span><span class="jscript1-symbol">+i.id,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupBy=i.groupBy;
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.owner=i.owner;
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i.visibility;
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style();
</span><span class="jscript1-space">		 </span><span class="jscript1-non-reservedkeyword">style.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomId();
</span><span class="jscript1-space">		 </span><span class="jscript1-non-reservedkeyword">style._class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomIdPrefix();
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style=style.loadFromJSON(i.style);
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
}

</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Player(name,id){
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.active</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomIdPrefix</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-string">'agePlayer'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.addActionInPlaceEditor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">header_name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement.children(</span><span class="jscript1-string">'p'</span><span class="jscript1-symbol">).first();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id;
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">header_name.bind(</span><span class="jscript1-string">'dblclick'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    	</span><span class="jscript1-comment">//	  header_name.unbind('dblclick');
</span><span class="jscript1-space">    		  </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">input_txt</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputText({name:</span><span class="jscript1-string">'playerName'</span><span class="jscript1-symbol">,value:name});
</span><span class="jscript1-space">    		  </span><span class="jscript1-identifier">header_name.html(input_txt);
</span><span class="jscript1-space">    		  </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.img({src:AgeSettings.imagePath+</span><span class="jscript1-string">'ok.png'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    		  </span><span class="jscript1-identifier">img.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    			  </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(input_txt.val()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name){
</span><span class="jscript1-space">    				  </span><span class="jscript1-identifier">AgeUpdater.sendUpdate(</span><span class="jscript1-string">'action=playerName&amp;name='</span><span class="jscript1-symbol">+input_txt.val()+</span><span class="jscript1-string">'&amp;player='</span><span class="jscript1-symbol">+id);
</span><span class="jscript1-space">        			  </span><span class="jscript1-identifier">header_name.html(input_txt.val());
</span><span class="jscript1-space">    			  </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    			  
    		  </span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    		  </span><span class="jscript1-identifier">input_txt.bind(</span><span class="jscript1-string">'blur'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    			  </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(input_txt.val()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name){
</span><span class="jscript1-space">    				  </span><span class="jscript1-identifier">AgeUpdater.sendUpdate(</span><span class="jscript1-string">'action=playerName&amp;name='</span><span class="jscript1-symbol">+input_txt.val()+</span><span class="jscript1-string">'&amp;player='</span><span class="jscript1-symbol">+id);
</span><span class="jscript1-space">        			  </span><span class="jscript1-identifier">header_name.html(input_txt.val());
</span><span class="jscript1-space">    			  </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    			  
    		  </span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    		  </span><span class="jscript1-identifier">header_name.append(img);
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setName=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(name){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name=name;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">header_name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement.children(</span><span class="jscript1-string">'p'</span><span class="jscript1-symbol">).first();
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">header_name.html(name);
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">header_name.unbind(</span><span class="jscript1-string">'dblclick'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.addActionInPlaceEditor();
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomId=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&gt;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomIdPrefix()+</span><span class="jscript1-string">'-'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getName=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Player.getName() id='</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id+</span><span class="jscript1-string">', name:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.playerAreaTitleNoPlayer;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setDomId=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(_id){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.setDomId(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomIdPrefix()+</span><span class="jscript1-string">'-'</span><span class="jscript1-symbol">+_id);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style(</span><span class="jscript1-number">130</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-number">150</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'transparent'</span><span class="jscript1-symbol">,</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomId(),</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomIdPrefix(),-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">,-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'absolute'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.loadFromJSON</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.name;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Player load form json angle:'</span><span class="jscript1-symbol">+p.angle,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.angle;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.active=p.active;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.left=p.style.left;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.top=p.style.top;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">};
}

</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Group(name,visibility,stacked,order,randomgenerator,style){
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_group</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">DEFAULTS.group;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomIdPrefix</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.groupDomIdPrefix;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomId=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&gt;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomIdPrefix()+</span><span class="jscript1-string">'-'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.owner=-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.isItem=</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.templateId=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_group.name;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.stacked</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">stacked</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_group.stacked;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_group.visibility;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.order</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">order</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_group.order;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.randomgenerator</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">randomgenerator</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_group.randomgenerator;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array();
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style=style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style();
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resetActions</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[i];
</span><span class="jscript1-space">			</span><span class="jscript1-identifier">itm.actionBar=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">			
		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.animateRandom</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(item_id){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Group.animateRandom() item_id:'</span><span class="jscript1-symbol">+item_id+</span><span class="jscript1-string">', this.randomgenerator:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.randomgenerator,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);</span><span class="jscript1-space">	
    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.randomgenerator){</span><span class="jscript1-space"> 	
    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item_image=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement.children(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">).first();
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[i];
</span><span class="jscript1-space">    			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itm.id==item_id)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item_image</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.HTMLElement.children(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">).first();
</span><span class="jscript1-space">    		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    		</span><span class="jscript1-non-reservedkeyword">setTimeout(</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){</span><span class="jscript1-space"> 
    			</span><span class="jscript1-identifier">image.attr(</span><span class="jscript1-string">'src'</span><span class="jscript1-symbol">,item_image.attr(</span><span class="jscript1-string">'src'</span><span class="jscript1-symbol">));</span><span class="jscript1-space"> 
    		  </span><span class="jscript1-symbol">},</span><span class="jscript1-space"> </span><span class="jscript1-number">500</span><span class="jscript1-space"> </span><span class="jscript1-symbol">);</span><span class="jscript1-space"> 
			
    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Group.animateRandom() randomgenerator is false.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.findItem=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(item_id){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[i];
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itm.id==item_id)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm;
</span><span class="jscript1-space">			
		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.sendGroupStackedUpdate=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(stacked,atItem){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'XXXXXXXX sendGroupStackedUpdate=function(stacked:'</span><span class="jscript1-symbol">+stacked,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player_name=GameManager.instance.players[GameManager.instance.player].name;
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">update</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'action=stack&amp;id='</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id+</span><span class="jscript1-string">'&amp;atItem='</span><span class="jscript1-symbol">+atItem+</span><span class="jscript1-string">'&amp;playerName='</span><span class="jscript1-symbol">+player_name+</span><span class="jscript1-string">'&amp;stacked='</span><span class="jscript1-symbol">+stacked;</span><span class="jscript1-space">	
	    	</span><span class="jscript1-identifier">AgeUpdater.sendUpdate(update);
</span><span class="jscript1-space">	    	
    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){Log(</span><span class="jscript1-string">'Group.sendGroupStackedUpdate() - '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderItem=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(item){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.createGameItem(item.style,{});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resetItemsPosition</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[i];
</span><span class="jscript1-space">			</span><span class="jscript1-identifier">itm.style.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.left;
</span><span class="jscript1-space">			</span><span class="jscript1-identifier">itm.style.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.top;
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent={left:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,top:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,zIndex:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setPositionComponent=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(pos){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">pos;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getPositionComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getFirstItem</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">f_itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">];
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">1</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[i];
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(f_itm.style.zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.style.zIndex)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">f_itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm;
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">f_itm;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setZIndex=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(zIndex){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">zIndex;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.zIndex.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,zIndex);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setLeft</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(left){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(left);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_left;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.left.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,_left);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setTop</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(top){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(top);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_top;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.positionComponent.top.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,_top);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bindAction</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar==</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createActionBar();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.css(</span><span class="jscript1-string">'display'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Group:bindAction visibility:'</span><span class="jscript1-symbol">+visibility,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(visibility==</span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.css({display:</span><span class="jscript1-string">'block'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.css({display:</span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createActionBar=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar==</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">    		
    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar=HTMLRenderer.div({_class:</span><span class="jscript1-string">'GroupActionBar'</span><span class="jscript1-symbol">}).css(</span><span class="jscript1-string">'display'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_group</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.img({src:AgeSettings.imagePath+AgeSettings.imageUnVisible});
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.img({src:AgeSettings.imagePath+AgeSettings.imageVisible});
</span><span class="jscript1-space">            
    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img_s</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.img({src:AgeSettings.imagePath+</span><span class="jscript1-string">'stacked1.png'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img_r</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.img({src:AgeSettings.imagePath+</span><span class="jscript1-string">'random1.png'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">img_s.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{_group.sendGroupStackedUpdate(</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">,_group.id);</span><span class="jscript1-space"> </span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">img_r.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{_group.sendRandomizeUpdate();</span><span class="jscript1-space"> </span><span class="jscript1-symbol">});</span><span class="jscript1-space">   		
    		</span><span class="jscript1-identifier">img.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{_group.sendVisibilityUpdate(!_group.visibility);</span><span class="jscript1-space"> </span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    		
    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.append(img);
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.append(img_s);
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.append(img_r);
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar);
</span><span class="jscript1-space">    		
    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.sendRandomizeUpdate</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'group randomize send update'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player_name=GameManager.instance.players[GameManager.instance.player].name;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">update</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'action=randomize&amp;id='</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id+</span><span class="jscript1-string">'&amp;player='</span><span class="jscript1-symbol">+player_name;</span><span class="jscript1-space">	
    	</span><span class="jscript1-identifier">AgeUpdater.sendUpdate(update);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.sendVisibilityUpdate=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(vsbl){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		
	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player_name=GameManager.instance.players[GameManager.instance.player].name;
</span><span class="jscript1-space">	   </span><span class="jscript1-comment">// 	var domid=this.HTMLElement.attr('id');
</span><span class="jscript1-space">	   </span><span class="jscript1-comment">// 	this.setItemVisibilityIcon(this.visibility);
</span><span class="jscript1-space">	   </span><span class="jscript1-comment">// 	if(this.visibility) var update = 'action=v&amp;i='+this.id+'&amp;dom='+domid+'&amp;player='+player_name+'&amp;v=false';	
</span><span class="jscript1-space">	   </span><span class="jscript1-comment">// 	else update = 'action=v&amp;i='+this.id+'&amp;dom='+domid+'&amp;player='+player_name+'&amp;v=true';
</span><span class="jscript1-space">	   </span><span class="jscript1-comment">// 	if(debug) Log('Item send visibility update this.visibility:'+this.visibility+' vsbl:'+vsbl+' this.visibility ^ vsbl:'+(this.visibility ^ vsbl),'d');
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">update</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'action=v&amp;i='</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id+</span><span class="jscript1-string">'&amp;player='</span><span class="jscript1-symbol">+player_name+</span><span class="jscript1-string">'&amp;v='</span><span class="jscript1-symbol">+vsbl+</span><span class="jscript1-string">'&amp;isGroup=true'</span><span class="jscript1-symbol">;</span><span class="jscript1-space">	
	    	</span><span class="jscript1-identifier">AgeUpdater.sendUpdate(update);
</span><span class="jscript1-space">	    	
    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'****** Group. sendVisibilityUpdate: vsbl-'</span><span class="jscript1-symbol">+vsbl,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){Log(</span><span class="jscript1-string">'Group.sendItemVisibilityUpdate() - '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setVisibility=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(vsbl){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility=vsbl;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.imagesPath+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.angle+</span><span class="jscript1-string">'_'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.imageName;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setItemVisibilityIcon(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img_e</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement.children(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">).first();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(img_e)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">img_e.attr(</span><span class="jscript1-string">'src'</span><span class="jscript1-symbol">,image_path);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setItemVisibilityIcon=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(vsbl){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(vsbl)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.children(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">).first().attr(</span><span class="jscript1-string">'src'</span><span class="jscript1-symbol">,AgeSettings.imagePath+AgeSettings.imageUnVisible);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar.children(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">).first().attr(</span><span class="jscript1-string">'src'</span><span class="jscript1-symbol">,AgeSettings.imagePath+AgeSettings.imageVisible);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">   </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.loadFromJSON</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(g){
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g.name;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.stacked</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g.stacked;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g.visibility;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.order</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g.order;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id=g.id;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actionBar=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HTMLElement=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(g.templateId)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.templateId=g.templateId;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.randomgenerator</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g.randomgenerator;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style();
</span><span class="jscript1-space">	    </span><span class="jscript1-non-reservedkeyword">style._class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomIdPrefix();
</span><span class="jscript1-space">	    </span><span class="jscript1-non-reservedkeyword">style.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getDomId();
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style=style.loadFromJSON(g.style);
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itms</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g.items;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array();
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itms.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Item();
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">item.group=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">     		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.push(item.loadFromJSON(itms[i]));
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;

</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
}

</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Table(style){
</span><span class="jscript1-space">  </span><span class="jscript1-comment">//  var _table = DEFAULTS.table;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array();
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style=style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style(</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">,</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'ageTable'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'ageTable'</span><span class="jscript1-symbol">,</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'absolute'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.loadFromJSON</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(t){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style();
</span><span class="jscript1-space">	    </span><span class="jscript1-non-reservedkeyword">style._class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'table'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	    </span><span class="jscript1-non-reservedkeyword">style.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'table'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style=style.loadFromJSON(t.style);
</span><span class="jscript1-comment">//	    Log('Erstelle Table:','i');
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
}

</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Game(name){
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_game</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">DEFAULTS.game;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_game.name;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style(</span><span class="jscript1-number">900</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-number">900</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'#eeeeee'</span><span class="jscript1-symbol">,</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'ageContent'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'ageGame'</span><span class="jscript1-symbol">,</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'relative'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.ressourcen</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array();

</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersSize=</span><span class="jscript1-number">2</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.players</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">[];
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.computeGameDimension</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_h</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">parseInt(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.table.style.height);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_w</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">parseInt(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.table.style.width);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Game.computeGameDimension &lt;b&gt;h:'</span><span class="jscript1-symbol">+_h+</span><span class="jscript1-string">' w:'</span><span class="jscript1-symbol">+_w+</span><span class="jscript1-string">'&lt;/b&gt;'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">padding</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">470</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!isNaN(_w)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!isNaN(_h)){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.height=AgeUtil.max(_w,_h)+padding;
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.style.width=AgeUtil.max(_w,_h)+padding;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Game.computeGameDimension - height or width are NaN'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getPlayerOwner=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.player&gt;=</span><span class="jscript1-number">0</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.players[</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.player];
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setRessourcen</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(ressourcen){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.ressourcen</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ressourcen;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getPlayers=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersSize</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&gt;</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.players.length==</span><span class="jscript1-number">0</span><span class="jscript1-symbol">)){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersSize;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.players.push(</span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Player(</span><span class="jscript1-string">''</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">));
</span><span class="jscript1-space">            </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.players;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.findGroup=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(grp_id){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.ressourcen.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">group</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.ressourcen[i];
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(group.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp_id)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">group;</span><span class="jscript1-space"> </span><span class="jscript1-comment">//&amp;&amp; group.randomgenerator
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'findGroup return NULL grp_id:'</span><span class="jscript1-symbol">+grp_id,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.findItem=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(itm_id){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.ressourcen.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">group</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.ressourcen[i];
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">group.findItem(itm_id);
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item;
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.findPlayer=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(player_id){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.players.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.players[i];
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(player.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player_id)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player;
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getTablePlayersOrder=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_players</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getPlayers();
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_players;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=_players.slice(</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_players.length);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players.length;</span><span class="jscript1-space">  </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.player)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players.push(players.shift());
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.table</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Table();
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setCurrentPlayer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(player){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.players.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.players[j];
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(_player.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.id)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.player=j;
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderer=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.render=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(contener){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getRenderer().</span><span class="jscript1-reservedword">start</span><span class="jscript1-symbol">(contener);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getRenderer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.computeGameDimension();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderer==</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){</span><span class="jscript1-space">	
    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Renderer(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderer;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.loadFromJSON</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(g){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(g!=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g.name;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersSize</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g.playersSize;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._public</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g._public;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g.players;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players</span><span class="jscript1-space"> </span><span class="jscript1-symbol">.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Player(players[j].name,players[j].id);
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">player.loadFromJSON(players[j]);
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.players.push(player);
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}

</span><span class="jscript1-space">    </span><span class="jscript1-comment">//	this.players = g.players;


</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">table</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Table();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.table</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">table.loadFromJSON(g.table);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">res</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g.resourcen;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">res.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">group</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Group();
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">group.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i;
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.ressourcen.push(group.loadFromJSON(res[i]));
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
}

</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Renderer(game){
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameContent=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.degree</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.init=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">Perspective.WIDTH</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space">  </span><span class="jscript1-identifier">game.style.width;
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">Perspective.HEIGHT</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space">  </span><span class="jscript1-identifier">game.style.height;
</span><span class="jscript1-space">        
    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setTable=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameTablePos</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.translateToRelativePosition([</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,</span><span class="jscript1-number">0</span><span class="jscript1-symbol">],{width:game.table.style.width,height:game.table.style.height});
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">game.table.style.setPosition({left:gameTablePos[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">],top:gameTablePos[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">]});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.</span><span class="jscript1-reservedword">start</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(contener_id){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">   </span><span class="jscript1-comment">// 	Log('Renderer.start: angle '+game.players[game.player].angle,'d');
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game.getPlayerOwner();</span><span class="jscript1-space">	
    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(cur_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.degree</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space">  </span><span class="jscript1-identifier">cur_player.angle;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">contener</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(contener_id);
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Starte Rendering in '</span><span class="jscript1-symbol">+contener,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">Perspective.gamePosition=contener.position();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.init();;
</span><span class="jscript1-space">        </span><span class="jscript1-comment">//create game wrapper with 3 div's areas: header, content and footer
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'ageWrapper'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameHeader</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'ageHeader'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">     </span><span class="jscript1-comment">//   gameHeader.append(HTMLRenderer.div({id:AgeSettings.ageConnectionStatusId}).append('&lt;img src=&quot;/age/images/connect_idle.gif&quot;/&gt;'));
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">gameHeader.append(HTMLRenderer.h1({content:game.name}));
</span><span class="jscript1-space">     
        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cont</span><span class="jscript1-space">  </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createElement(game.style);

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameContent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cont;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameFooter</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'ageFooter'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'game name :'</span><span class="jscript1-symbol">+game.name,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-comment">//draw a table in the center of game
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setTable();
</span><span class="jscript1-space">      
        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameTable</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.createGameItem(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getStyle(game.table.style),{});
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">gameTable.css({zIndex:</span><span class="jscript1-number">0</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameContent.append(gameTable);


</span><span class="jscript1-space">        </span><span class="jscript1-comment">//create players
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderPlayers();

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameResourcen</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'ageResourcen'</span><span class="jscript1-symbol">,position:</span><span class="jscript1-string">'absolute'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameResourcenHdr</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'ageResourcenHdr'</span><span class="jscript1-symbol">}).append(</span><span class="jscript1-string">'&lt;p&gt;'</span><span class="jscript1-symbol">+AgeSettings.resourcenTitle+</span><span class="jscript1-string">'&lt;/p&gt;'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">gameResourcen.append(gameResourcenHdr);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">gameResourcen.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderResourcen(game.ressourcen));
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameContent.append(gameResourcen);

</span><span class="jscript1-space">        </span><span class="jscript1-identifier">gameWrapper.append(gameHeader);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">gameWrapper.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameContent);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">gameWrapper.append(gameFooter);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">contener.append(gameWrapper);
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Renderer.start(): '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">return</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}

</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getStyle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(style){</span><span class="jscript1-space">	
    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'&lt;b&gt; renderer: setStyle angle:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.degree+</span><span class="jscript1-string">' style.bgImage:'</span><span class="jscript1-symbol">+style.bgImage+</span><span class="jscript1-string">'&lt;/b&gt;'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.degree==</span><span class="jscript1-number">0</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">newPos</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.rotateElement(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.degree,</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style);
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">style.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">newPos.left;
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">style.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">newPos.top;
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">style.width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">newPos.width;
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">style.height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">newPos.height;
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">style.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.degree;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createElement</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(style){

</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'(depracted) create element imageName'</span><span class="jscript1-symbol">+style.imageName+</span><span class="jscript1-string">', width:'</span><span class="jscript1-symbol">+style.width+</span><span class="jscript1-string">', height:'</span><span class="jscript1-symbol">+style.height+</span><span class="jscript1-string">',imagesPath():'</span><span class="jscript1-symbol">+style.getImagePath(</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">)+</span><span class="jscript1-string">''
</span><span class="jscript1-space">    			 </span><span class="jscript1-symbol">+</span><span class="jscript1-string">',bgColor():'</span><span class="jscript1-symbol">+style.getBgColor()+</span><span class="jscript1-string">',id:'</span><span class="jscript1-symbol">+style.id+</span><span class="jscript1-string">',_class:'</span><span class="jscript1-symbol">+style._class+</span><span class="jscript1-string">' pos:'</span><span class="jscript1-symbol">+style.position+</span><span class="jscript1-string">' pos:'</span><span class="jscript1-symbol">+style.top+</span><span class="jscript1-string">' pos:'</span><span class="jscript1-symbol">+style.left,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">imagePath</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.getImagePath(</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(imagePath==</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">imagePath=undefined;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'div'</span><span class="jscript1-symbol">)).css(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{backgroundColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.getBgColor(),backgroundImage:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">imagePath,width:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.width,</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">height:style.height,left:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.left,top:style.top,position:style.position}).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.id}).addClass(style._class);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderResourcen</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(resourcen){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Renderer: Resourcen length is '</span><span class="jscript1-symbol">+resourcen.length,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameResourcenCnt</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'ageResourcenCnt'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">resourcen.length;</span><span class="jscript1-space">  </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">resourcen[i];
</span><span class="jscript1-space">        	 </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp.randomgenerator)</span><span class="jscript1-space">  </span><span class="jscript1-identifier">gameResourcenCnt.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderRandomGenerator(grp));</span><span class="jscript1-space">        	
             </span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameResourcenCnt.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderGroup(grp));
</span><span class="jscript1-space">            
        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameResourcenCnt;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderRandomGenerator=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(grp){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grps_contener</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({_class:</span><span class="jscript1-string">'randomgenerator'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm_style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Style();
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">itm_style.setStyle(grp.style);</span><span class="jscript1-space"> 
        
        </span><span class="jscript1-identifier">itm_style.id=grp.getDomId();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groupHTML</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.createGameItem(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getStyle(grp.style),{title:(grp.name)});
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.makeDraggable(groupHTML,grp);
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">grps_contener.append(groupHTML);
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">grp.HTMLElement</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space">  </span><span class="jscript1-identifier">groupHTML;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">items</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.items;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">items.length;</span><span class="jscript1-space">  </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">items[i];
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">itm_style.setStyle(item.style);</span><span class="jscript1-space"> 
    		</span><span class="jscript1-identifier">itm_style.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item.getDomId();
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itemHTML=HTMLRenderer.createGameItem(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getStyle(itm_style),{});
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">itemHTML.css({display:</span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">});</span><span class="jscript1-space"> 		
    		</span><span class="jscript1-identifier">grps_contener.append(itemHTML);
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">item.HTMLElement</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space">  </span><span class="jscript1-identifier">itemHTML;
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Renderer.renderRandomGenerator(): '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);</span><span class="jscript1-space"> </span><span class="jscript1-symbol">}</span><span class="jscript1-space"> 	
    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grps_contener;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderGroup</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(grp){
</span><span class="jscript1-space">        
    	
        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">items</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.items;
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Renderer.renderGroup() &lt;b&gt;grp.order:'</span><span class="jscript1-symbol">+grp.order+</span><span class="jscript1-string">', GameManager.local:'</span><span class="jscript1-symbol">+GameManager.local+</span><span class="jscript1-string">', items.length:'</span><span class="jscript1-symbol">+items.length+</span><span class="jscript1-string">' grp.visibility:'</span><span class="jscript1-symbol">+grp.visibility+</span><span class="jscript1-string">' items[0].visibility:'</span><span class="jscript1-symbol">+items[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">].visibility+</span><span class="jscript1-string">'/&lt;b&gt;'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!grp.order</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.local){
</span><span class="jscript1-space">               </span><span class="jscript1-identifier">items=AgeUtil.randomShuffle(items);
</span><span class="jscript1-space">               </span><span class="jscript1-identifier">items=AgeUtil.randomShuffle(items);
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}</span><span class="jscript1-space">     
        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp.stacked){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp_style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.style.copy();
</span><span class="jscript1-space">        	</span><span class="jscript1-identifier">grp_style._class=grp_style._class+</span><span class="jscript1-string">' stacked'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(items.length</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&gt;</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.getFirstItem();
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp.visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.visibility)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        			</span><span class="jscript1-identifier">grp_style.imagesPath</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.style.imagesPath;
</span><span class="jscript1-space">        			</span><span class="jscript1-identifier">grp_style.imageName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.style.imageName;
</span><span class="jscript1-space">        			</span><span class="jscript1-identifier">grp_style.bgImage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.style.bgImage;
</span><span class="jscript1-space">        			</span><span class="jscript1-identifier">grp_style.bgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.style.bgColor;
</span><span class="jscript1-space">        		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groupDOM</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.createGameItem(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getStyle(grp_style),{title:(grp.name)});
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.makeDraggable(groupDOM,grp);
</span><span class="jscript1-space">        	</span><span class="jscript1-identifier">grp.HTMLElement=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bindItemAction(groupDOM,grp);
</span><span class="jscript1-space">        	</span><span class="jscript1-identifier">grp.createActionBar();
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.HTMLElement;</span><span class="jscript1-space"> 	
        </span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grps_contener</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:grp.style.id,_class:grp.style._class});
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">items.length;</span><span class="jscript1-space">  </span><span class="jscript1-identifier">j++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        		</span><span class="jscript1-identifier">grps_contener.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderItem(grp,items[j]));
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grps_contener;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}</span><span class="jscript1-space">  
      
    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderItem</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(grp,itm){
</span><span class="jscript1-space">    	
        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm_style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.style.copy();
</span><span class="jscript1-space">        
        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp.style.width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&gt;</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm_style.width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.style.width;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp.style.height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&gt;</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm_style.height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.style.height;
</span><span class="jscript1-space">        
        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!(grp.visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.visibility)){
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">itm_style.bgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.style.bgColor;
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">itm_style.imageName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.style.imageName;
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">itm_style.bgImage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.style.bgImage;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        
       	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itemDOM</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.createGameItem(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getStyle(itm_style),{title:(grp.name)});
</span><span class="jscript1-space">       	</span><span class="jscript1-identifier">itemDOM.addClass(grp.getDomId());
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">itm.HTMLElement=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bindItemAction(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.makeDraggable(itemDOM,itm),itm);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">itm.createActionBar();</span><span class="jscript1-space">      
    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.HTMLElement;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bindItemAction=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(HTMLElement,itm){</span><span class="jscript1-space">	
    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'BINDE ACTION DBCLICK for element.id:'</span><span class="jscript1-symbol">+itm.getDomId()+</span><span class="jscript1-string">' HTMLElement.id:'</span><span class="jscript1-symbol">+HTMLElement.attr(</span><span class="jscript1-string">'id'</span><span class="jscript1-symbol">),</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLElement.bind(</span><span class="jscript1-string">'dblclick'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">itm.bindAction();</span><span class="jscript1-space"> 
    		</span><span class="jscript1-identifier">AgeItemLayer.layerSeqNr</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+=</span><span class="jscript1-space"> </span><span class="jscript1-number">1</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">itm.style.zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeItemLayer.layerSeqNr;
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.makeDraggable</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(itemDOM,itemObject){
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">itemDOM.draggable({
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">containment</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space">  </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameContent,
</span><span class="jscript1-space">    		</span><span class="jscript1-non-reservedkeyword">scroll</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">drag:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(event,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ui)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.getNextLayerSeqNr(ui.helper.css(</span><span class="jscript1-string">'zIndex'</span><span class="jscript1-symbol">));
</span><span class="jscript1-space">    		    </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'drag zIndex:'</span><span class="jscript1-symbol">+zIndex+</span><span class="jscript1-string">' typeof:'</span><span class="jscript1-symbol">+(</span><span class="jscript1-reservedword">typeof</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">zIndex),</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    		    </span><span class="jscript1-identifier">itemDOM.css({zIndex:zIndex});
</span><span class="jscript1-space">    		    </span><span class="jscript1-identifier">itemObject.style.zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">zIndex;
</span><span class="jscript1-space">    		    </span><span class="jscript1-identifier">itemObject.style.left=ui.position.left;
</span><span class="jscript1-space">    		    </span><span class="jscript1-identifier">itemObject.style.top=ui.position.top;
</span><span class="jscript1-space">    			</span><span class="jscript1-identifier">AgeUpdater.setPosition(event,ui,itemObject);
</span><span class="jscript1-space">    			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itemObject.randomgenerator){
</span><span class="jscript1-space">    				</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itemDOM.children(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">).first();
</span><span class="jscript1-space">    				</span><span class="jscript1-identifier">image.attr(</span><span class="jscript1-string">'src'</span><span class="jscript1-symbol">,itemObject.style.getImagePath(</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">));
</span><span class="jscript1-space">    			</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">              </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">            </span><span class="jscript1-non-reservedkeyword">stop:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(event,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ui)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            	  </span><span class="jscript1-identifier">itemDOM.css({zIndex:ui.helper.css(</span><span class="jscript1-string">'zIndex'</span><span class="jscript1-symbol">)});
</span><span class="jscript1-space">            	  </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itemObject.randomgenerator)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeUpdater.randomizeGroup(itemObject);
</span><span class="jscript1-space">              </span><span class="jscript1-symbol">}</span><span class="jscript1-space"> 
            </span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itemDOM;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderPlayers=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	 </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game.getPlayers();
</span><span class="jscript1-space">    	 </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Renderer.renderPlayers: players.length:'</span><span class="jscript1-symbol">+players.length,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	 </span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players.length;</span><span class="jscript1-space">  </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players[i];
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">playerElement</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createElement(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getStyle(player.style));
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.name;
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-string">''</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-string">&quot;Player - &quot;</span><span class="jscript1-symbol">+(i+</span><span class="jscript1-number">1</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">             </span><span class="jscript1-identifier">player.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name;
</span><span class="jscript1-space">            
             </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">playerHeader</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.p({_class:</span><span class="jscript1-string">'agePlayerHeader'</span><span class="jscript1-symbol">,content:name});
</span><span class="jscript1-space">             </span><span class="jscript1-identifier">playerElement.append(playerHeader);
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(player.active)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">playerElement.addClass(</span><span class="jscript1-string">'activePlayer'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">playerElement.addClass(</span><span class="jscript1-string">'unactivePlayer'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">          
             </span><span class="jscript1-identifier">player.HTMLElement=playerElement;
</span><span class="jscript1-space">        	 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameContent.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.makeDroppable(player).HTMLElement);
</span><span class="jscript1-space">         </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.makeDroppable</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(player){
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">player.HTMLElement.droppable({
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">hoverClass:</span><span class="jscript1-space"> </span><span class="jscript1-string">'drophover'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    		</span><span class="jscript1-identifier">drop:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">event,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ui</span><span class="jscript1-space"> </span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		 	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ui.draggable;
</span><span class="jscript1-space">    			</span><span class="jscript1-identifier">GameManager.setElementOwner(item.attr(</span><span class="jscript1-string">'id'</span><span class="jscript1-symbol">),player);
</span><span class="jscript1-space">    	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    	    </span><span class="jscript1-identifier">out:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(event,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ui)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{</span><span class="jscript1-space">  
	    	    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ui.draggable;
</span><span class="jscript1-space">	        	</span><span class="jscript1-identifier">GameManager.setElementOwner(item.attr(</span><span class="jscript1-string">'id'</span><span class="jscript1-symbol">),</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">params</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeUtil.extractDomId(item.attr(</span><span class="jscript1-string">'id'</span><span class="jscript1-symbol">));
</span><span class="jscript1-space">	        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(params</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.active)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeUpdater.sendUpdate(</span><span class="jscript1-string">'action=itemupdate&amp;toPlayer='</span><span class="jscript1-symbol">+item.owner+</span><span class="jscript1-string">'&amp;id='</span><span class="jscript1-symbol">+params[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">]);</span><span class="jscript1-space">	  
    	    </span><span class="jscript1-symbol">}</span><span class="jscript1-space">	
    	</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setPlayers</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.init();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setTable();
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game.getPlayers();
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'# berechne Spieler Position '</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">SITES</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">4</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">C</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">50</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p_size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players.length;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p_c</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.floor(p_size/SITES);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p_i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p_size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">%</span><span class="jscript1-space"> </span><span class="jscript1-identifier">SITES;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">table_style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game.table.style;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player_index</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">1</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">SITES;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players_per_site</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p_c</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(i&lt;=p_i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">?</span><span class="jscript1-space"> </span><span class="jscript1-number">1</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-space"> </span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">1</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players_per_site;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">y;
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">x;

</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players[player_index++];
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'#  player = players[player_index++] player.style:'</span><span class="jscript1-symbol">+player.style,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">switch</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(i)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">                    </span><span class="jscript1-comment">//BOTTOM
</span><span class="jscript1-space">                    </span><span class="jscript1-reservedword">case</span><span class="jscript1-space"> </span><span class="jscript1-number">1</span><span class="jscript1-symbol">:
</span><span class="jscript1-space">                        </span><span class="jscript1-identifier">y</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space">  </span><span class="jscript1-identifier">table_style.height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">table_style.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">C;
</span><span class="jscript1-space">                        </span><span class="jscript1-identifier">x</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(table_style.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">table_style.width+(table_style.width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">/</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players_per_site)*((</span><span class="jscript1-number">1</span><span class="jscript1-symbol">-</span><span class="jscript1-number">2</span><span class="jscript1-symbol">*j)/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.style.width/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                        </span><span class="jscript1-identifier">player.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">                        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">' # 1 player name:'</span><span class="jscript1-symbol">+player.name+</span><span class="jscript1-string">' x='</span><span class="jscript1-symbol">+x+</span><span class="jscript1-string">' y='</span><span class="jscript1-symbol">+y,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                     </span><span class="jscript1-reservedword">break</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">                    </span><span class="jscript1-comment">//LEFT
</span><span class="jscript1-space">                    </span><span class="jscript1-reservedword">case</span><span class="jscript1-space"> </span><span class="jscript1-number">2</span><span class="jscript1-symbol">:
</span><span class="jscript1-space">                        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(p_size==</span><span class="jscript1-number">2</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">                            </span><span class="jscript1-identifier">y</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space">  </span><span class="jscript1-identifier">table_style.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">C</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.style.height;
</span><span class="jscript1-space">                            </span><span class="jscript1-identifier">x</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(table_style.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">table_style.width+(table_style.width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">/</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players_per_site)*((</span><span class="jscript1-number">1</span><span class="jscript1-symbol">-</span><span class="jscript1-number">2</span><span class="jscript1-symbol">*j)/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">)</span><span class="jscript1-space">  </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.style.width/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                            </span><span class="jscript1-identifier">player.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">180</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">                        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">                        </span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">                            </span><span class="jscript1-identifier">x</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space">  </span><span class="jscript1-identifier">table_style.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">C-player.style.width;
</span><span class="jscript1-space">                            </span><span class="jscript1-identifier">y</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(table_style.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+table_style.height+(table_style.height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">/</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players_per_site)*((</span><span class="jscript1-number">1</span><span class="jscript1-symbol">-</span><span class="jscript1-number">2</span><span class="jscript1-symbol">*j)/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.style.height/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                            </span><span class="jscript1-identifier">player.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">90</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">                        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">                        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">' # 2 player name:'</span><span class="jscript1-symbol">+player.name+</span><span class="jscript1-string">' x='</span><span class="jscript1-symbol">+x+</span><span class="jscript1-string">' y='</span><span class="jscript1-symbol">+y,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                        </span><span class="jscript1-reservedword">break</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">                    </span><span class="jscript1-comment">//TOP
</span><span class="jscript1-space">                    </span><span class="jscript1-reservedword">case</span><span class="jscript1-space"> </span><span class="jscript1-number">3</span><span class="jscript1-symbol">:
</span><span class="jscript1-space">                        </span><span class="jscript1-identifier">y</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space">  </span><span class="jscript1-identifier">table_style.top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">C</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.style.height;</span><span class="jscript1-space"> </span><span class="jscript1-comment">//      interval = table_style.width / players_per_site;
</span><span class="jscript1-space">                        </span><span class="jscript1-identifier">x</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(table_style.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">table_style.width+(table_style.width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">/</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players_per_site)*((</span><span class="jscript1-number">1</span><span class="jscript1-symbol">-</span><span class="jscript1-number">2</span><span class="jscript1-symbol">*j)/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">)</span><span class="jscript1-space">  </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.style.width/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                        </span><span class="jscript1-identifier">player.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">180</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">                        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">' # 3 player name:'</span><span class="jscript1-symbol">+player.name+</span><span class="jscript1-string">' x='</span><span class="jscript1-symbol">+x+</span><span class="jscript1-string">' y='</span><span class="jscript1-symbol">+y,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                       </span><span class="jscript1-reservedword">break</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">                    </span><span class="jscript1-comment">//RIGHT
</span><span class="jscript1-space">                    </span><span class="jscript1-reservedword">case</span><span class="jscript1-space"> </span><span class="jscript1-number">4</span><span class="jscript1-symbol">:
</span><span class="jscript1-space">                        </span><span class="jscript1-identifier">x</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space">  </span><span class="jscript1-identifier">table_style.left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">table_style.width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">C;
</span><span class="jscript1-space">                        </span><span class="jscript1-identifier">y</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(table_style.top+table_style.height+(table_style.height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">/</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players_per_site)*((</span><span class="jscript1-number">1</span><span class="jscript1-symbol">-</span><span class="jscript1-number">2</span><span class="jscript1-symbol">*j)/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.style.height/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                        </span><span class="jscript1-identifier">player.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">270</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> 
                        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">' # 4  player name:'</span><span class="jscript1-symbol">+player.name+</span><span class="jscript1-string">' x='</span><span class="jscript1-symbol">+x+</span><span class="jscript1-string">' y='</span><span class="jscript1-symbol">+y,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                        </span><span class="jscript1-reservedword">break</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">                    </span><span class="jscript1-reservedword">default</span><span class="jscript1-symbol">:
</span><span class="jscript1-space">                        </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'RendererSwich.setPlayers SWITCH error'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                        </span><span class="jscript1-reservedword">break</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">                </span><span class="jscript1-symbol">}


</span><span class="jscript1-space">                </span><span class="jscript1-identifier">player.style.setPosition({left:x,</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">top:y});
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(player.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player.setDomId(player_index);
</span><span class="jscript1-space">               
            </span><span class="jscript1-symbol">}

</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">     </span><span class="jscript1-symbol">}

</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective={
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">PLAYERS:</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">WIDTH:</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">HEIGHT:</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-comment">//funktioniert nicht mit ((2*Math.PI)/this.PLAYERS - NaN Error
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">ANGLE:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-symbol">((</span><span class="jscript1-number">2</span><span class="jscript1-symbol">*Math.PI)/</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.PLAYERS);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">VIEW_ANGLE:</span><span class="jscript1-space"> </span><span class="jscript1-symbol">((</span><span class="jscript1-number">3</span><span class="jscript1-symbol">*Math.PI)/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">),
</span><span class="jscript1-space">    </span><span class="jscript1-comment">// positive x Achse
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">X:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.ceil(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.WIDTH/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">     </span><span class="jscript1-comment">// positive y Achse
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">Y:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.ceil(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.HEIGHT/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">getR:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(x,y){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.sqrt(Math.pow(x,</span><span class="jscript1-number">2</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.pow(y,</span><span class="jscript1-space"> </span><span class="jscript1-number">2</span><span class="jscript1-symbol">));
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">getLeft:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(x){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">x</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.WIDTH-</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.X());
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">getTop:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(y){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.Y()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-identifier">y;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">getX:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(left){
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.WIDTH-</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.X());
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">getY:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(top){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.Y()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">top;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">getAngle:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(x,y){
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">return</span><span class="jscript1-space">  </span><span class="jscript1-non-reservedkeyword">Math.atan2(y,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">x);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">getPoint:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(r,angle){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-symbol">[Math.round(r*Math.cos(angle)),</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(r*Math.sin(angle))];
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-comment">//muss man die Name Ã¤ndern. Verschiebt eigene Element so die symetrisch zu anderen ist.
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">getCenterPosition:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(position,element){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{left:(position.left+Math.round(element.width()/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">)),top:(position.top+Math.round(element.height()/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">))};
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">shiftRightBottom:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(position,element){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{left:(position.left+Math.round(element.width/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">)),top:(position.top+Math.round(element.height/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">))};
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">shiftLeftTop:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(position,element){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{left:(position.left-Math.round(element.width/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">)),top:(position.top-Math.round(element.height/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">))};
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">translateToRelativePosition:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(point,dim){
</span><span class="jscript1-space">         </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=Perspective.getTop(point[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">]);
</span><span class="jscript1-space">         </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_left=Perspective.getLeft(point[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">]);
</span><span class="jscript1-space">         </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-symbol">[_left-Math.round(dim.width/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">),_top-Math.round(dim.height/</span><span class="jscript1-number">2</span><span class="jscript1-symbol">)];
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">moveElementToCenter:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(point,element){
</span><span class="jscript1-space">         </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.translateToRelativePosition(point,{width:element.width(),height:element.height()});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">rotatePoint:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(point,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">angle){

</span><span class="jscript1-space">      </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">r</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getR(point[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">],point[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">]);
</span><span class="jscript1-space">      </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getPoint(r,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">angle);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">degreeToRad:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(degree){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(degree</span><span class="jscript1-space"> </span><span class="jscript1-symbol">*</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.PI)/</span><span class="jscript1-number">180</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">rotateElement:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(degree,style){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(degree</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">leftTop</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.shiftRightBottom({left:style.left,top:style.top},{width:style.width,height:style.height});
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">x</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.getX(leftTop.left);
</span><span class="jscript1-space">	   		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">y</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.getY(leftTop.top);
</span><span class="jscript1-space">	   		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.getAngle(x,y);
</span><span class="jscript1-space">	   		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">new_point</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.rotatePoint([x,y],angle+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.degreeToRad(degree));
</span><span class="jscript1-space">	   		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.getLeft(new_point[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">]);
</span><span class="jscript1-space">	   		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.getTop(new_point[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">]);
</span><span class="jscript1-space">	   		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">dim</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{width:style.width,height:style.height};
</span><span class="jscript1-space">	   		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(degree</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-number">90</span><span class="jscript1-space"> </span><span class="jscript1-symbol">|</span><span class="jscript1-space"> </span><span class="jscript1-identifier">degree==</span><span class="jscript1-number">270</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">dim</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{width:style.height,height:style.width};
</span><span class="jscript1-space">	   		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">newleftTop</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.shiftLeftTop({left:left,top:top},{width:dim.width,height:dim.height});
</span><span class="jscript1-space">	   		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{left:newleftTop.left,top:newleftTop.top,width:dim.width,height:dim.height};</span><span class="jscript1-space">  	
    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">gamePosition:</span><span class="jscript1-reservedword">null

</span><span class="jscript1-symbol">};


</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(text,level)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">msg;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(level==</span><span class="jscript1-string">'w'</span><span class="jscript1-symbol">)msg</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'&lt;p&gt;&lt;span class=&quot;ageWarning&quot;&gt;&lt;span class=&quot;label&quot;&gt;[W]:&lt;/span&gt; '</span><span class="jscript1-symbol">+text+</span><span class="jscript1-string">'&lt;/span&gt;&lt;/p&gt;'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(level==</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">msg</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'&lt;p&gt;&lt;span class=&quot;ageError&quot;&gt;&lt;span class=&quot;label&quot;&gt;[E]:&lt;/span&gt; '</span><span class="jscript1-symbol">+text+</span><span class="jscript1-string">'&lt;/span&gt;&lt;/p&gt;'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(level==</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">msg</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'&lt;p&gt;&lt;span class=&quot;ageDebug&quot;&gt;&lt;span class=&quot;label&quot;&gt;[D]:&lt;/span&gt; '</span><span class="jscript1-symbol">+text+</span><span class="jscript1-string">'&lt;/span&gt;&lt;/p&gt;'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space">  </span><span class="jscript1-identifier">msg</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'&lt;p&gt;&lt;span class=&quot;ageInfo&quot;&gt;&lt;span class=&quot;label&quot;&gt;[I]:&lt;/span&gt; '</span><span class="jscript1-symbol">+text+</span><span class="jscript1-string">'&lt;/span&gt;&lt;/p&gt;'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#ageConsole'</span><span class="jscript1-symbol">).prepend(msg);

}

</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">IConnector(onopen,onmessage,onclose,send,join){
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.onopen</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=onopen;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.onmessage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=onmessage;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.onclose</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">onclose;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.send</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=send;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.join</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">join;
}
</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">WebSocketConnector(){
</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.base</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">IConnector;
</span><span class="jscript1-space">   </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.base(</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-non-reservedkeyword">alert(</span><span class="jscript1-string">&quot;onopen&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">},</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-non-reservedkeyword">alert(</span><span class="jscript1-string">&quot;onmessage&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">},</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-non-reservedkeyword">alert(</span><span class="jscript1-string">&quot;onclose&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">},</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-non-reservedkeyword">alert(</span><span class="jscript1-string">&quot;send&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">},</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-non-reservedkeyword">alert(</span><span class="jscript1-string">&quot;join&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">});
}

</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">CometConnector(){
</span><span class="jscript1-space">   </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.base</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">IConnector;
</span><span class="jscript1-space">   </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.base(</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-non-reservedkeyword">alert(</span><span class="jscript1-string">&quot;onopen&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">},</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(msg){
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">action</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">msg.n;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">msg.v;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Bekomme Daten action:'</span><span class="jscript1-symbol">+action+</span><span class="jscript1-string">' data:'</span><span class="jscript1-symbol">+data,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'init'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(data){
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">status</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.status;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(status</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        			</span><span class="jscript1-identifier">Log(data.msg,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        			</span><span class="jscript1-identifier">GameManager.chat({n:</span><span class="jscript1-string">'ageSystem'</span><span class="jscript1-symbol">,v:</span><span class="jscript1-string">'&lt;span class=&quot;ageSystem&quot;&gt;*** keine Spieler zugewissen.&lt;/span&gt;'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        		</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(status==</span><span class="jscript1-number">1</span><span class="jscript1-symbol">){</span><span class="jscript1-space">  
        			</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(data.game){
</span><span class="jscript1-space">        				</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Comet.init loadGame:'</span><span class="jscript1-symbol">+data.game,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        				</span><span class="jscript1-identifier">GameManager.loadGame(data.game);
</span><span class="jscript1-space">        				
        				</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Comet.init setze curren Player:'</span><span class="jscript1-symbol">+data.player.id+</span><span class="jscript1-string">' winkel:'</span><span class="jscript1-symbol">+data.player.angle,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        				</span><span class="jscript1-identifier">GameManager.instance.setCurrentPlayer(data.player);
</span><span class="jscript1-space">        				
        				</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Comet.init rendere Game.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        				</span><span class="jscript1-identifier">GameManager.renderGame();
</span><span class="jscript1-space">        			</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        			</span><span class="jscript1-identifier">GameManager.local=</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        			</span><span class="jscript1-non-reservedkeyword">setInterval(</span><span class="jscript1-string">&quot;AgeUpdater.listenForUpdate()&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.updatePeriod);
</span><span class="jscript1-space">        		</span><span class="jscript1-comment">//	$(window).unload( function () { GameManager.leaveGame(); } );
</span><span class="jscript1-space">        			</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){Log(</span><span class="jscript1-string">'CometConnector.init() - '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);}
</span><span class="jscript1-space">        		
        		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Ich habe unbekannte Init antwort bekommen.!!! status:'</span><span class="jscript1-symbol">+status,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'FÃ¼r eine Ation - init wurde keine Daten empfanden!!!'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        	
        	</span><span class="jscript1-identifier">AgeUtil.setConnectionStatus(</span><span class="jscript1-string">'idle'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'j'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(data.player){
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.player;
</span><span class="jscript1-space">        		</span><span class="jscript1-identifier">GameManager.joinGame(player);
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        	 
        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'pong'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Connector: Bekome PONG'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        	
        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'itemOwner'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id=data.id;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">owner=data.owner;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.findItem(id);
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(item!=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        		</span><span class="jscript1-identifier">item.owner</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">owner;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'owner for item '</span><span class="jscript1-symbol">+id+</span><span class="jscript1-string">' changed:'</span><span class="jscript1-symbol">+owner,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        	</span><span class="jscript1-comment">//{n:'itemOwner',v:{id:&quot;+id+&quot;,owner:&quot;+owner+&quot;}}&quot;;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'m'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">         </span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item_id=data.i;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">pos=data.pos;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player_id=data.player;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.players[GameManager.instance.player];
</span><span class="jscript1-space">         	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(player_id!=cur_player.id){
</span><span class="jscript1-space">         		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.players[GameManager.instance.player];
</span><span class="jscript1-space">        	</span><span class="jscript1-comment">//	var player = GameManager.instance.findPlayer(player_id);
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player.angle;</span><span class="jscript1-comment">//-player.angle;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.rotateElement(angle,{left:pos.x,top:pos.y,width:pos.w,height:pos.h});
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">isItem=data.isItem;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groupTyp=data.groupTyp;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!isItem</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groupTyp==</span><span class="jscript1-string">'random'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.findGroup(item_id);
</span><span class="jscript1-space">        			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.randomgenerator)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">bgImage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.style.getImagePath(</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        		</span><span class="jscript1-symbol">}</span><span class="jscript1-space">  
        		 </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'move data.zIndex:'</span><span class="jscript1-symbol">+data.zIndex+</span><span class="jscript1-string">' typeof:'</span><span class="jscript1-symbol">+(</span><span class="jscript1-reservedword">typeof</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.zIndex)+</span><span class="jscript1-string">' pos.dom:'</span><span class="jscript1-symbol">+pos.dom,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">      		   </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">zIndex</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.getNextLayerSeqNr(data.zIndex);
</span><span class="jscript1-space">        		
        		</span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+pos.dom).css(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.left,top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.top,zIndex:zIndex});
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(bgImage){
</span><span class="jscript1-space">        			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+pos.dom).children(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">).first();
</span><span class="jscript1-space">    				</span><span class="jscript1-identifier">image.attr(</span><span class="jscript1-string">'src'</span><span class="jscript1-symbol">,bgImage);
</span><span class="jscript1-space">        			
        		</span><span class="jscript1-symbol">}</span><span class="jscript1-space"> 
        	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	   </span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){Log(</span><span class="jscript1-string">'CometConnector.onmessage() action:move msg:'</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);</span><span class="jscript1-space"> </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'r'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp_id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.grp;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm_id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.itm;
</span><span class="jscript1-space">    </span><span class="jscript1-comment">//    	if(debug) Log('CometConnector.onmessage()  action:random grp_id:'+grp_id+', itm_id:'+itm_id,'d');
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groups</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.ressourcen;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groups.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">				</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groups[i];
</span><span class="jscript1-space">				</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp_id)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.animateRandom(itm_id);
</span><span class="jscript1-space">			</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'randomize'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp_id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.id;
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">playerName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.playerName;
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.findGroup(grp_id);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">            	</span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+grp.getDomId()).remove();
</span><span class="jscript1-space">            	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.loadFromJSON(data.grp);
</span><span class="jscript1-space">            	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">renderer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.renderer;</span><span class="jscript1-space"> 
            	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">renderedGrp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">renderer.renderGroup(g);
</span><span class="jscript1-space">            	</span><span class="jscript1-identifier">renderer.gameContent.append(renderedGrp);
</span><span class="jscript1-space">            	</span><span class="jscript1-identifier">GameManager.chat({n:playerName,v:</span><span class="jscript1-string">'*** hat die Gruppe '</span><span class="jscript1-symbol">+g.name+</span><span class="jscript1-string">' zuffÃ¤lig geordnet.'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">            </span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Bekomme Randomize Update. Group mit id:'</span><span class="jscript1-symbol">+grp_id+</span><span class="jscript1-string">' wurde nicht gefunden.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'w'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        	</span><span class="jscript1-comment">//{n:'randomize',v:{id:&quot;+id+&quot;,playerName:'&quot;+playerName+&quot;',grp:&quot;+grp.toJSON()+&quot;}}&quot;;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'chat'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-identifier">GameManager.chat({n:data.from,v:data.msg});
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'updateItem'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.findItem(data.id);
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        		</span><span class="jscript1-identifier">item.update(data);
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Comet.action updateItem bekommen, aber keine Aktion augefÃ¼hrt.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'w'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        	
        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'stack'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp_id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.id;
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">playerName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.playerName;
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">stacked</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.grp.stacked;
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.findGroup(grp_id);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'++++++++++++++++ action stack grp.stacked:'</span><span class="jscript1-symbol">+grp.stacked+</span><span class="jscript1-string">' stacked:'</span><span class="jscript1-symbol">+stacked,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.stacked</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">stacked){
</span><span class="jscript1-space">            	</span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+grp.getDomId()).remove();
</span><span class="jscript1-space">            	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.loadFromJSON(data.grp);
</span><span class="jscript1-space">            	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">renderer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.renderer;</span><span class="jscript1-space"> 
            	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">renderedGrp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">renderer.renderGroup(g);
</span><span class="jscript1-space">            	</span><span class="jscript1-identifier">renderer.gameContent.append(renderedGrp);
</span><span class="jscript1-space">            	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(g.stacked)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.chat({n:playerName,v:</span><span class="jscript1-string">'*** hat die Gruppe '</span><span class="jscript1-symbol">+g.name+</span><span class="jscript1-string">' gestapelt.'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">            </span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Stack Update bekommen, aber keine Aktion ausgefÃ¼hrt.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'w'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'playerName'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.findPlayer(data.id);
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        		</span><span class="jscript1-identifier">GameManager.chat({n:player.name+</span><span class="jscript1-string">':'</span><span class="jscript1-symbol">,v:</span><span class="jscript1-string">'*** hat die Name auf &lt;b&gt;'</span><span class="jscript1-symbol">+data.name+</span><span class="jscript1-string">'&lt;/b&gt; geÃ¤ndert.'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        		</span><span class="jscript1-identifier">player.setName(data.name);
</span><span class="jscript1-space">        		
        	</span><span class="jscript1-symbol">}</span><span class="jscript1-space">  	
        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'leave'</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-identifier">GameManager.removePlayer(data);
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(action==</span><span class="jscript1-string">'v'</span><span class="jscript1-symbol">){</span><span class="jscript1-space">	
        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm_id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.itm;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player_name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.player;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm_dom</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.domid;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.v;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">isGroup</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.isGroup;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">isPrivate</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.isPrivate;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)Log(</span><span class="jscript1-string">' update visibility'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(isGroup){
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">group</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.findGroup(itm_id);
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(group</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        			</span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+group.getDomId()).remove();
</span><span class="jscript1-space">        			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">g</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">group.loadFromJSON(data.grp);
</span><span class="jscript1-space">        			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">renderer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.renderer;</span><span class="jscript1-space"> 
                	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">renderedGrp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">renderer.renderGroup(g);
</span><span class="jscript1-space">                	</span><span class="jscript1-identifier">renderer.gameContent.append(renderedGrp);
</span><span class="jscript1-space">                	</span><span class="jscript1-identifier">GameManager.chat({n:player_name,v:</span><span class="jscript1-string">'*** hat Sichtbarkeit der Gruppe '</span><span class="jscript1-symbol">+g.name+</span><span class="jscript1-string">' geÃ¤ndert.'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groups</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.ressourcen;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groups.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">				</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groups[i];</span><span class="jscript1-space">			
				</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.items.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">					</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm</span><span class="jscript1-space">  </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.items[j];
</span><span class="jscript1-space">					</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itm.id==itm_id){
</span><span class="jscript1-space">						</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(visibility){
</span><span class="jscript1-space">							</span><span class="jscript1-identifier">itm.style.bgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.bgColor;
</span><span class="jscript1-space">							</span><span class="jscript1-identifier">itm.style.imageName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.img;
</span><span class="jscript1-space">						</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">						</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance;
</span><span class="jscript1-space">						</span><span class="jscript1-identifier">itm.style.angle</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game.players[game.player].angle;
</span><span class="jscript1-space">						</span><span class="jscript1-identifier">itm.setVisibility(visibility);
</span><span class="jscript1-space">					 	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!isPrivate)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.chat({n:player_name,v:</span><span class="jscript1-string">' hat eine Element von eine Gruppe &lt;strong&gt;'</span><span class="jscript1-symbol">+grp.name+</span><span class="jscript1-string">'&lt;/strong&gt; umgedreht.'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">			        	
					</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">				</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">			</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">     </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">},</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(key){
</span><span class="jscript1-space">        </span><span class="jscript1-non-reservedkeyword">alert(</span><span class="jscript1-string">&quot;onclose&quot;</span><span class="jscript1-symbol">+key);
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">},</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(data){
</span><span class="jscript1-space">	   </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'CometConnector.send() data:'</span><span class="jscript1-symbol">+data,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">AgeUtil.setConnectionStatus(</span><span class="jscript1-string">'active'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">$.ajax({type</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">&quot;POST&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">url:GameManager.url+</span><span class="jscript1-string">'?key='</span><span class="jscript1-symbol">+GameManager.key,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data:data,
</span><span class="jscript1-space">			</span><span class="jscript1-identifier">success:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(data,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">textStatus,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">xhr)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		    </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(data</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">		    	</span><span class="jscript1-non-reservedkeyword">eval(</span><span class="jscript1-string">&quot;var rec_data = &quot;</span><span class="jscript1-symbol">+data+</span><span class="jscript1-string">&quot;;&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">				</span><span class="jscript1-identifier">GameManager.connector.onmessage(rec_data);
</span><span class="jscript1-space">				</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">plyr</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.getPlayerOwner();
</span><span class="jscript1-space">				</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">plyr_active</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(plyr==</span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">?</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">plyr.active);
</span><span class="jscript1-space">				</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(plyr_active)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeUtil.setConnectionStatus(</span><span class="jscript1-string">'idle'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">				</span><span class="jscript1-reservedword">else</span><span class="jscript1-space">  </span><span class="jscript1-identifier">AgeUtil.setConnectionStatus(</span><span class="jscript1-string">'disconnected'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		    </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">		  </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">		  </span><span class="jscript1-identifier">error:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(xhr,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">textStatus,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">errorThrown)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			     </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">status</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">textStatus;</span><span class="jscript1-space"> 
			     </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">errTwn</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">			     </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(status==</span><span class="jscript1-string">'timeout'</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">status=</span><span class="jscript1-string">'Timeout von '</span><span class="jscript1-symbol">+AgeSettings.responseTimeout+</span><span class="jscript1-string">' ms wurde Ã¼berschritten.'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">			     </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(errorThrown)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">errTwn=</span><span class="jscript1-string">', errorThrown: '</span><span class="jscript1-symbol">+errorThrown;
</span><span class="jscript1-space">				 </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'CometConnector.send(): '</span><span class="jscript1-symbol">+status+errTwn,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">				 </span><span class="jscript1-identifier">AgeUtil.setConnectionStatus(</span><span class="jscript1-string">'caution'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		  </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">		  </span><span class="jscript1-identifier">timeout:AgeSettings.responseTimeout
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">},</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(url,query){
</span><span class="jscript1-space">		 </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">' Erstelle eine IFRAME...'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		 </span><span class="jscript1-identifier">AgeUtil.setConnectionStatus(</span><span class="jscript1-string">'active'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		 </span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'body'</span><span class="jscript1-symbol">).append(</span><span class="jscript1-string">'&lt;iframe name=&quot;hidden&quot; src=&quot;'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+url+</span><span class="jscript1-string">'?'</span><span class="jscript1-symbol">+query+</span><span class="jscript1-string">'&quot; id=&quot;comet-frame&quot; style=&quot;display: none;&quot;&gt;&lt;/iframe&gt;'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">});

}
WebSocketConnector.</span><span class="jscript1-reservedword">prototype</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">IConnector;
CometConnector.</span><span class="jscript1-reservedword">prototype</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">IConnector;
</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeItemLayer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">id:</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">layerSeqNr:</span><span class="jscript1-number">100
</span><span class="jscript1-symbol">};
</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">key:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">contener:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">connector:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">instance:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">joined:</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">url:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">local:</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">setLocal:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(local){
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.local=local;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">game:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(gameparams){
</span><span class="jscript1-space">	        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.instance==</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">	        	 </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'The Game instance is NULL.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);

</span><span class="jscript1-space">	        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">	        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.instance;
</span><span class="jscript1-space">	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">table:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">	        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game().table;
</span><span class="jscript1-space">	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">getNextLayerSeqNr:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(_seq,id){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">seq</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">1</span><span class="jscript1-symbol">*_seq;
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(isNaN(seq))</span><span class="jscript1-space"> </span><span class="jscript1-identifier">seq=AgeItemLayer.layerSeqNr;
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(AgeItemLayer.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeItemLayer.layerSeqNr</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">seq){
</span><span class="jscript1-space">            	</span><span class="jscript1-identifier">AgeItemLayer.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id;
</span><span class="jscript1-space">            	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(AgeItemLayer.layerSeqNr</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">seq){
</span><span class="jscript1-space">            		</span><span class="jscript1-identifier">AgeItemLayer.layerSeqNr</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">seq;
</span><span class="jscript1-space">            		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'getNextLayerSeqNr if(AgeItemLayer.layerSeqNr &lt; seq):'</span><span class="jscript1-symbol">+AgeItemLayer.layerSeqNr,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    	    		</span><span class="jscript1-identifier">AgeItemLayer.layerSeqNr</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+=</span><span class="jscript1-space"> </span><span class="jscript1-number">1</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'getNextLayerSeqNr else:'</span><span class="jscript1-symbol">+AgeItemLayer.layerSeqNr,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	    	</span><span class="jscript1-symbol">}</span><span class="jscript1-space"> 
            </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeItemLayer.layerSeqNr;
</span><span class="jscript1-space">	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">chat:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(data){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">text</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+AgeSettings.chatContenerMsgId);
</span><span class="jscript1-space">        	</span><span class="jscript1-non-reservedkeyword">text.prepend(</span><span class="jscript1-string">'&lt;p&gt;&lt;span class=&quot;label&quot;&gt;'</span><span class="jscript1-symbol">+data.n+</span><span class="jscript1-string">':&lt;/span&gt; '</span><span class="jscript1-symbol">+data.v+</span><span class="jscript1-string">'&lt;/p&gt;'</span><span class="jscript1-symbol">);</span><span class="jscript1-space">  	
	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">setElementOwner:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(dom_id,player){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">e_split</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">dom_id.split(</span><span class="jscript1-string">&quot;-&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(e_split.length==</span><span class="jscript1-number">2</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">e_split[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">]==AgeSettings.itemDomIdPrefix){
</span><span class="jscript1-space">	    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">1</span><span class="jscript1-symbol">*e_split[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">];
</span><span class="jscript1-space">	    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.findItem(id);
</span><span class="jscript1-space">	    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">	    			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item.owner=-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		    		</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">item.owner=player.id;
</span><span class="jscript1-space">		    	</span><span class="jscript1-comment">//	Log('Player.setOwner('+player+') elementId:'+id,'i');
</span><span class="jscript1-space">		    		</span><span class="jscript1-identifier">AgeUpdater.sendUpdate(</span><span class="jscript1-string">'action=itemowner&amp;owner='</span><span class="jscript1-symbol">+item.owner+</span><span class="jscript1-string">'&amp;id='</span><span class="jscript1-symbol">+item.id);
</span><span class="jscript1-space">	    		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">	    		
	    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">removePlayer:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(player_id){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.instance.findPlayer(player_id);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">				</span><span class="jscript1-identifier">player.HTMLElement.removeClass(</span><span class="jscript1-string">'activePlayer'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">				</span><span class="jscript1-identifier">player.HTMLElement.removeClass(</span><span class="jscript1-string">'playerOwner'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">				</span><span class="jscript1-identifier">player.HTMLElement.addClass(</span><span class="jscript1-string">'unactivePlayer'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">			</span><span class="jscript1-comment">//	player.name = _player.name;
</span><span class="jscript1-space">				</span><span class="jscript1-identifier">player.active=</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">				</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.chat({n:player.name,v:</span><span class="jscript1-string">'&lt;span class=&quot;ageSystem&quot;&gt;*** verlieÃŸ das Spiel.&lt;/span&gt;'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">			</span><span class="jscript1-comment">//	Log('Player &lt;strong&gt;'+player.name+'&lt;/strong&gt; mit ID:'+player.id+' hat das Spiel verlassen.','i');
</span><span class="jscript1-space">	    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameManager.removePlayer(): Player mit id:'</span><span class="jscript1-symbol">+player_id+</span><span class="jscript1-string">' wurde nicht gefunden.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'w'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">joinGame:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(_player){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameManagar.join game player:'</span><span class="jscript1-symbol">+_player.id,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.instance.players;
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">				</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players[i];
</span><span class="jscript1-space">				</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(player.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_player.id){</span><span class="jscript1-space">	
					</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'player.id == _player.id:'</span><span class="jscript1-symbol">+_player.id,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">					</span><span class="jscript1-identifier">player.HTMLElement.removeClass(</span><span class="jscript1-string">'unactivePlayer'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">					</span><span class="jscript1-identifier">player.HTMLElement.addClass(</span><span class="jscript1-string">'activePlayer'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">					</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">owner_id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.instance.getPlayerOwner()==</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">?</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.instance.getPlayerOwner().id;
</span><span class="jscript1-space">					</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(player.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-identifier">owner_id){
</span><span class="jscript1-space">						</span><span class="jscript1-identifier">player.HTMLElement.addClass(</span><span class="jscript1-string">'playerOwner'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">						</span><span class="jscript1-identifier">player.addActionInPlaceEditor();
</span><span class="jscript1-space">						</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.joined=</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">					</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">					</span><span class="jscript1-identifier">player.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_player.name;
</span><span class="jscript1-space">					</span><span class="jscript1-identifier">player.active=</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">					</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.chat({n:player.name,v:</span><span class="jscript1-string">'&lt;span class=&quot;ageSystem&quot;&gt;*** has joined.&lt;/span&gt;'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">					</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Player &lt;strong&gt;'</span><span class="jscript1-symbol">+player.name+</span><span class="jscript1-string">'&lt;/strong&gt; mit ID:'</span><span class="jscript1-symbol">+player.id+</span><span class="jscript1-string">' has joined.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">				</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">			</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">	    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){Log(</span><span class="jscript1-string">'GameManager.joinGame() '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);}
</span><span class="jscript1-space">	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">leaveGame:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">	    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'&lt;strong&gt;GameManager.leaveGame()&lt;/strong&gt;'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.players[GameManager.instance.player];
</span><span class="jscript1-space">		    	</span><span class="jscript1-identifier">cur_player.HTMLElement.removeClass(</span><span class="jscript1-string">'activePlayer'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		    	</span><span class="jscript1-identifier">cur_player.HTMLElement.removeClass(</span><span class="jscript1-string">'playerOwner'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		    	</span><span class="jscript1-identifier">cur_player.HTMLElement.addClass(</span><span class="jscript1-string">'unactivePlayer'</span><span class="jscript1-symbol">);</span><span class="jscript1-space">	    	
		    	</span><span class="jscript1-identifier">AgeUpdater.sendUpdate(</span><span class="jscript1-string">'action=leave&amp;player='</span><span class="jscript1-symbol">+cur_player.id);
</span><span class="jscript1-space">		    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.joined=</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		    	</span><span class="jscript1-identifier">cur_player.active</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		    </span><span class="jscript1-comment">//	alert('leaveGame');
</span><span class="jscript1-space">		    	
	    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){Log(</span><span class="jscript1-string">'GameManager.leaveGame() - '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);}
</span><span class="jscript1-space">	    </span><span class="jscript1-comment">//	return false;
</span><span class="jscript1-space">	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">init:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(data){
</span><span class="jscript1-space">	    	</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Setze init Parameters...'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(data.key</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.url</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.contener){
</span><span class="jscript1-space">	    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.key</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.key;
</span><span class="jscript1-space">	    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.url</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.url;
</span><span class="jscript1-space">	    		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.contener</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.contener;
</span><span class="jscript1-space">	    		</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Game contenter is :'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.contener,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    		</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Erstelle eine Connector...'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	 	        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.connector</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">CometConnector();
</span><span class="jscript1-space">	 	        </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Verbinde sich mit den Server...'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	 	        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">query=</span><span class="jscript1-string">'key='</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.key+</span><span class="jscript1-string">'&amp;action=join'</span><span class="jscript1-symbol">;
</span><span class="jscript1-comment">//	 	        if(data.game){
//	 	        	this.loadGame(data.game);
//	 	        	this.renderGame();
//	 	        }
</span><span class="jscript1-space">	 	      </span><span class="jscript1-comment">//  if(this.instance==null) query += '&amp;loadGame=true'; 	        
</span><span class="jscript1-space">		        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.connector.join(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.url,query);
</span><span class="jscript1-space">		        </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Url: '</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.url+</span><span class="jscript1-string">'?'</span><span class="jscript1-symbol">+query,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    		
	    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameManager.init() key, url oder contener ist nicht defieniert.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);

</span><span class="jscript1-space">	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">loadGame:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(gameparams){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Game();
</span><span class="jscript1-space">	    	</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'loadGame '</span><span class="jscript1-symbol">+gameparams,</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.instance</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game.loadFromJSON(gameparams);
</span><span class="jscript1-space">	    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">renderGame:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameManager.renderGame this.contener:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.contener,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.instance.render($(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.contener));
</span><span class="jscript1-space">	    </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">	   
</span><span class="jscript1-symbol">};
AgeUpdater={
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">update:{r:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">,c:[],l:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">lastUpdateTime:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">setPosition:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(event,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ui,itm){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'setPos GameManager.local?'</span><span class="jscript1-symbol">+GameManager.local,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!GameManager.local){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{</span><span class="jscript1-space">		
        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.players[GameManager.instance.player];
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Perspective.rotateElement(-cur_player.angle,{left:ui.position.left,top:ui.position.top,width:itm.style.width,height:itm.style.height});
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">dom</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.getDomId();
</span><span class="jscript1-space">	            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groupTyp=</span><span class="jscript1-string">'norm'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itm.randomgenerator)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groupTyp=</span><span class="jscript1-string">'random'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itm.isItem)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">isItm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'true'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	            </span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">isItm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'false'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_update</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">&quot;action=m&amp;zindex=&quot;</span><span class="jscript1-symbol">+itm.style.zIndex+</span><span class="jscript1-string">&quot;&amp;isItm=&quot;</span><span class="jscript1-symbol">+isItm+</span><span class="jscript1-string">&quot;&amp;groupTyp=&quot;</span><span class="jscript1-symbol">+groupTyp+</span><span class="jscript1-string">&quot;&amp;p=&quot;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-string">&quot;&amp;i=&quot;</span><span class="jscript1-symbol">+itm.id+</span><span class="jscript1-string">&quot;&amp;dom=&quot;</span><span class="jscript1-symbol">+dom+</span><span class="jscript1-string">&quot;&amp;x=&quot;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(style.left)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-string">&quot;&amp;y=&quot;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.round(style.top)+</span><span class="jscript1-string">&quot;&amp;h=&quot;</span><span class="jscript1-symbol">+Math.round(style.height)+</span><span class="jscript1-string">&quot;&amp;w=&quot;</span><span class="jscript1-symbol">+Math.round(style.width);</span><span class="jscript1-space"> 
	            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update.r</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_update;
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){Log(</span><span class="jscript1-string">'AgeUpdater.setPosition() - '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);}
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">itm.setLeft(ui.position.left);
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">itm.setTop(ui.position.top);</span><span class="jscript1-space"> 
            </span><span class="jscript1-identifier">itm.setZIndex(itm.style.zIndex);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        
    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">randomizeGroup:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(grp){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(GameManager.instance){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.players[GameManager.instance.player];
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.sendUpdate(</span><span class="jscript1-string">'action=random&amp;grp='</span><span class="jscript1-symbol">+grp.id+</span><span class="jscript1-string">'&amp;p='</span><span class="jscript1-symbol">+cur_player.name);
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">sendChatMessage:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    	
    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">input_text</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+AgeSettings.chatContenerInputId).children(</span><span class="jscript1-string">'input'</span><span class="jscript1-symbol">).first();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">msg</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$.trim(input_text.val());
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(msg!=</span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">msg!=</span><span class="jscript1-string">''</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&gt;=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.players[GameManager.instance.player];
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.sendUpdate(</span><span class="jscript1-string">'action=chat&amp;msg='</span><span class="jscript1-symbol">+msg+</span><span class="jscript1-string">'&amp;from='</span><span class="jscript1-symbol">+cur_player.name);
</span><span class="jscript1-space">	    	</span><span class="jscript1-identifier">input_text.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">''</span><span class="jscript1-symbol">);</span><span class="jscript1-space">  
    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){Log(</span><span class="jscript1-string">'AgeUpdater.sendChatMessage() - '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">sendUpdate:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(updateMsg){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!GameManager.local){
</span><span class="jscript1-space">            
            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.players[GameManager.instance.player];
</span><span class="jscript1-space">       </span><span class="jscript1-comment">//     if(debug) Log('update : '+updateMsg+' gesendet?'+cur_player.active,'d');
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(cur_player.active)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.connector.send(updateMsg);
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'AgeUpdater.sendUpdate(): Game ist Local.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'w'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">listenForUpdate:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_date</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Date();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.lastUpdateTime==</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.lastUpdateTime=_date.getTime();
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update!=</span><span class="jscript1-string">''</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update.r</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update.l){
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.lastUpdateTime=_date.getTime();
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update.l</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update.r).substring(</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update.r.length);
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.sendUpdate(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update.r);
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">}</span><span class="jscript1-space"> 	
        	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">diff</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_date.getTime()-</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.lastUpdateTime;
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(diff</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&gt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.pingpongPeriod){
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(GameManager.instance.player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&gt;=</span><span class="jscript1-number">0</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">            		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">cur_player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameManager.instance.players[GameManager.instance.player];
</span><span class="jscript1-space">            		
            		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.sendUpdate(</span><span class="jscript1-string">'action=ping&amp;from='</span><span class="jscript1-symbol">+cur_player.id);
</span><span class="jscript1-space">            		
            	</span><span class="jscript1-symbol">}</span><span class="jscript1-space"> 
        		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'send PING diff:'</span><span class="jscript1-symbol">+diff+</span><span class="jscript1-string">' GameManager.instance.player:'</span><span class="jscript1-symbol">+GameManager.instance.player+</span><span class="jscript1-string">' this.lastUpdateTime:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.lastUpdateTime,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.lastUpdateTime=_date.getTime();
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}</span><span class="jscript1-space">    
    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">ajaxFileUpload:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'AgeUpdater: ajaxFileUpload'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'ajaxFileUpload'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">d</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+id);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(d</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">d.remove();
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">d</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:id});</span><span class="jscript1-space"> </span><span class="jscript1-comment">//,enctype:'multipart/form-data'
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">div</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'div'</span><span class="jscript1-symbol">)).css(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{display</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">}).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id});
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">form</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'form'</span><span class="jscript1-symbol">)).css(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{display</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">}).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{action:AgeSettings.serverContext+</span><span class="jscript1-string">'game/xhr.htm'</span><span class="jscript1-symbol">,method:</span><span class="jscript1-string">'POST'</span><span class="jscript1-symbol">,enctype:</span><span class="jscript1-string">'multipart/form-data'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">input</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.input.clone();
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">input.attr({name:</span><span class="jscript1-string">'tmp.image'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">form.append(input);
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">form.append(</span><span class="jscript1-string">'&lt;input type=&quot;submit&quot; value=&quot;submit&quot; /&gt;'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">div.append(form);
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'body'</span><span class="jscript1-symbol">).append(div);
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">form.ajaxForm(</span><span class="jscript1-space"> 			
    			</span><span class="jscript1-symbol">{</span><span class="jscript1-space"> </span><span class="jscript1-identifier">dataType:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> 
    				</span><span class="jscript1-identifier">success:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(data){
</span><span class="jscript1-space">    				</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">msg</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">data.split(</span><span class="jscript1-string">'==='</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">   		   	  
   	   				</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'AgeUpdater.ajaxFileUpload: bind:&lt;b&gt;'</span><span class="jscript1-symbol">+p.bind+</span><span class="jscript1-string">'(\''</span><span class="jscript1-symbol">+msg[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">]+</span><span class="jscript1-string">'\',true)&lt;/b&gt;'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    				</span><span class="jscript1-non-reservedkeyword">eval(</span><span class="jscript1-string">''</span><span class="jscript1-symbol">+p.bind+</span><span class="jscript1-string">'(\''</span><span class="jscript1-symbol">+msg[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">]+</span><span class="jscript1-string">'\',true)'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	
    			</span><span class="jscript1-symbol">}}
</span><span class="jscript1-space">    			
    			</span><span class="jscript1-comment">/*
    			function(data) { 
 
    				if(debug) Log('AgeUpdater.ajaxFileUpload: bind:'+p.bind+'(\''+data+'\')','d');
    				eval(''+p.bind+'(\''+data+'\')');
                }*/
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">);</span><span class="jscript1-space"> </span><span class="jscript1-comment">//{success:eval(p.bind)}
</span><span class="jscript1-space">    	</span><span class="jscript1-non-reservedkeyword">form.submit();

</span><span class="jscript1-space">    </span><span class="jscript1-symbol">}
};
AgeUtil={
</span><span class="jscript1-space">  </span><span class="jscript1-non-reservedkeyword">max:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(a,b){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">max</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">a;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(b&gt;a)</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">max</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">b;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">max;
</span><span class="jscript1-space">  </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">  </span><span class="jscript1-identifier">extractDomId:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(dom_id){
</span><span class="jscript1-space">	  </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">e_split</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">dom_id.split(</span><span class="jscript1-string">&quot;-&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">  	  </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(e_split.length==</span><span class="jscript1-number">2</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">  		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-symbol">[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">*e_split[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">],e_split[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">]];
</span><span class="jscript1-space">  	  </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">  	  </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">  </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">  </span><span class="jscript1-identifier">randomShuffle:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(array){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">array.length;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-space"> </span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">while</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">--i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">j</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.floor(</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Math.random()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">*</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-number">1</span><span class="jscript1-space"> </span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">tempi</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">array[i];
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">tempj</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">array[j];
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">array[i]</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">tempj;
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">array[j]</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">tempi;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">array;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">isNull:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(e){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(e==</span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">e</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">e==</span><span class="jscript1-string">'null'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">e</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">undefined)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">setConnectionStatus:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(s){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">status_img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.imagePath;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(s==</span><span class="jscript1-string">'idle'</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">status_img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+=</span><span class="jscript1-space"> </span><span class="jscript1-string">'connect_idle.gif'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(s==</span><span class="jscript1-string">'active'</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">status_img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+=</span><span class="jscript1-space"> </span><span class="jscript1-string">'connect_active.gif'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(s==</span><span class="jscript1-string">'caution'</span><span class="jscript1-symbol">)status_img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+=</span><span class="jscript1-space"> </span><span class="jscript1-string">'connect_caution.gif'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(s==</span><span class="jscript1-string">'disconnected'</span><span class="jscript1-symbol">)status_img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+=</span><span class="jscript1-space"> </span><span class="jscript1-string">'connect_disconnected.gif'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">status_img</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+=</span><span class="jscript1-space"> </span><span class="jscript1-string">'connect_idle.gif'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+AgeSettings.ageConnectionStatusId).html(</span><span class="jscript1-string">'&lt;img  src=&quot;'</span><span class="jscript1-symbol">+status_img+</span><span class="jscript1-string">'&quot; /&gt;'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">}
};



</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">DEFAULTS={
</span><span class="jscript1-space">    </span><span class="jscript1-non-reservedkeyword">style:{height:</span><span class="jscript1-number">90</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">width:</span><span class="jscript1-number">72</span><span class="jscript1-symbol">,bgColor:</span><span class="jscript1-string">'transparent'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">,left:</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,top:</span><span class="jscript1-number">0</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">,position:</span><span class="jscript1-string">'absolute'</span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">item:{name:AgeSettings.defaultItemName,count:</span><span class="jscript1-number">1</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">visibility:</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">group:{name:AgeSettings.defaultGroupName,</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">visibility:</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">,stacked:</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">order:</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">randomgenerator:</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">game:{name:AgeSettings.defaultGameName,_public:</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">}
};









</span><span class="jscript1-comment">/*    #######################   GAME CREATOR #################################*/


</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameCreatorManager={
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">domid:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">renderedGameCreator:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">renderedViewResults:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">renderedFormContent:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">renderedFooterBarWiz1:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">renderedFooterBarWiz2:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-non-reservedkeyword">form:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">key:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">editKey:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">actions:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array(),
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">gameCreator:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">_next:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">_back:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">_save:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">templates:</span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array(),
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">setTemplates:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(tmpls){
</span><span class="jscript1-space">	  </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.templates=tmpls;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">update:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(mColorPicker</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">mColorPicker.main();
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameCreatorManager:update Color Picker ist nicht VerfÃ¼gbar !!!'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">       
       </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameCreatorManager.update()'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bindActions();
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">bind:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameCreatorManager. bind: p.domid'</span><span class="jscript1-symbol">+p.domid,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+p.domid).bind(</span><span class="jscript1-string">'colorpicked'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            </span><span class="jscript1-symbol">(p.object).setBgColor($(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">).val());
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Color picked: '</span><span class="jscript1-symbol">+$(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">).val(),</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">bindActions:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        
       </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(mColorPicker</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">           </span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actions.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actions[i];
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameCreatorManager: binde Action colorpicked: '</span><span class="jscript1-symbol">+p.domid,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bind(p);
</span><span class="jscript1-space">              </span><span class="jscript1-identifier">p</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">       </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameCreatorManager:bindActions Cann not bind a action to colorPicker, becouse is not avaible'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">       
       </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.actions</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array();
</span><span class="jscript1-space">       
    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">addItem:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(grp){
</span><span class="jscript1-space">	  </span><span class="jscript1-identifier">grp.newItem();</span><span class="jscript1-space">         
    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">addGroup:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(thisRes){
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">thisRes.newGroup(</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Group());
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update();
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">closeGroup:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(grp){
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">GameCreatorManager.gameCreator.resourcenCreator.removeGroup(grp);
</span><span class="jscript1-space">    </span><span class="jscript1-comment">//	grp.groupWrapper.remove();
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">displayWizard:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(id){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(id==</span><span class="jscript1-number">1</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">    	   </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._next.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;inline&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	   </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedGameCreator.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;block&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	   </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedViewResults</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedViewResults.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;none&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._back.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;none&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._save.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;none&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._next.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;none&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedGameCreator.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;none&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedViewResults</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedViewResults.remove();
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedViewResults</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createViewResults();
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedViewResults.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;block&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._back.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;inline&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._save.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;inline&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},

</span><span class="jscript1-space">    </span><span class="jscript1-identifier">save:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameCreator.gameSetting.setPlayers();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.form.submit();
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">showConfirmDialog:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">$(</span><span class="jscript1-string">&quot;#dialog-confirm&quot;</span><span class="jscript1-symbol">).attr({title:p.title}).dialog({resizable:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">,height:</span><span class="jscript1-number">140</span><span class="jscript1-symbol">,modal:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">,buttons:</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">Ja:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">                     </span><span class="jscript1-comment">//   eval(''+p.action+'()');
</span><span class="jscript1-space">			</span><span class="jscript1-identifier">$(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">).dialog(</span><span class="jscript1-string">'close'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">},
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">Nein:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-identifier">$(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">).dialog(</span><span class="jscript1-string">'close'</span><span class="jscript1-symbol">);

</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}}});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">createViewResults:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">viewResults=HTMLRenderer.div({id:</span><span class="jscript1-string">'GameViewResultsWrapper'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'ResultsWrapper'</span><span class="jscript1-symbol">}).append(</span><span class="jscript1-string">'game rendering....'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedFormContent.append(viewResults);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">viewResults.empty();
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameCreatorManager.gameCreator.gameSetting.game;
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">game.setRessourcen(GameCreatorManager.gameCreator.resourcenCreator.getResourcen());
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">game.player=-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">game.players=[];
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'createViewResults &lt;b&gt;game.getRenderer().setPlayers()&lt;/b&gt;'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">game.getRenderer().setPlayers();
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">game.render(</span><span class="jscript1-string">'#GameViewResultsWrapper'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">viewResults;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">create:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(domid,game){
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">domid;
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameCreator</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameCreator(game);
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedGameCreator</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameCreator.render();
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameCreatorManagerWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGameCreatorManagerWrapper(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedGameCreator);
</span><span class="jscript1-space">       </span><span class="jscript1-identifier">$(domid).append(gameCreatorManagerWrapper);
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update();

</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">loadTemplate:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(tmplt_id){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">try</span><span class="jscript1-symbol">{</span><span class="jscript1-space">		
	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">template</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.templates[tmplt_id];
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Group();
</span><span class="jscript1-space">	    	</span><span class="jscript1-identifier">grp.loadFromJSON(template.value);
</span><span class="jscript1-space">	    	</span><span class="jscript1-identifier">grp.templateId=template.id;
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)Log(</span><span class="jscript1-string">'Lade templates template.value:'</span><span class="jscript1-symbol">+template.value,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    	</span><span class="jscript1-identifier">GameCreatorManager.gameCreator.resourcenCreator.newGroup(</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp);
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.update();
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">catch</span><span class="jscript1-symbol">(e){Log(</span><span class="jscript1-string">'GameCreatorManager.loadTemplate(): '</span><span class="jscript1-symbol">+e,</span><span class="jscript1-string">'e'</span><span class="jscript1-symbol">);}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">edit:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(domid,gameManager,editKey){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.editKey=editKey;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.key</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameManager.key;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.create(domid,gameManager.instance);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">createGameCreatorManagerWrapper:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(formContentValues){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">wrapperDiv</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'GameCreatorManagerWrapper'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'Wrapper'</span><span class="jscript1-symbol">});

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedFormContent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedFormContent.append(formContentValues);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">form</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.form({id:</span><span class="jscript1-string">'GameCreatorForm'</span><span class="jscript1-symbol">,formContent:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.renderedFormContent,enctype:</span><span class="jscript1-string">'multipart/form-data'</span><span class="jscript1-symbol">});


</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">renderedFooterBar</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.p({_class:</span><span class="jscript1-string">'creatorFooter'</span><span class="jscript1-symbol">});

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._next</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.button({content:</span><span class="jscript1-string">'next'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'button'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._back</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.button({content:</span><span class="jscript1-string">'back'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'button'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._save</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.button({content:</span><span class="jscript1-string">'save'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'button'</span><span class="jscript1-symbol">});

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._back.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;none&quot;</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._save.css(</span><span class="jscript1-string">&quot;display&quot;</span><span class="jscript1-symbol">,</span><span class="jscript1-string">&quot;none&quot;</span><span class="jscript1-symbol">);

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._next.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{GameCreatorManager.displayWizard(</span><span class="jscript1-number">2</span><span class="jscript1-symbol">);});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._back.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{GameCreatorManager.displayWizard(</span><span class="jscript1-number">1</span><span class="jscript1-symbol">);});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._save.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{GameCreatorManager.save();});

</span><span class="jscript1-space">        </span><span class="jscript1-identifier">renderedFooterBar.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._next);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">renderedFooterBar.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._back);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">renderedFooterBar.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._save);
</span><span class="jscript1-space">        </span><span class="jscript1-non-reservedkeyword">form.append(HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'key'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.key}));
</span><span class="jscript1-space">        </span><span class="jscript1-non-reservedkeyword">form.append(HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'editKey'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.editKey}));
</span><span class="jscript1-space">        </span><span class="jscript1-non-reservedkeyword">form.append(renderedFooterBar);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.form</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">form;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">wrapperDiv.append(form);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">}
};
</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeTemplates={
</span><span class="jscript1-space">	</span><span class="jscript1-identifier">contener:</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">	</span><span class="jscript1-identifier">bind:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(e,i){
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">e.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-identifier">GameCreatorManager.loadTemplate(i);
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(AgeTemplates.contener!=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">				</span><span class="jscript1-identifier">AgeTemplates.contener.css({display:</span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">});</span><span class="jscript1-space">	
			</span><span class="jscript1-symbol">}</span><span class="jscript1-space"> 			
		</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">return</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">create:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(templates){
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">_templates</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">templates</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameCreatorManager.templates;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(_templates.length&gt;</span><span class="jscript1-number">0</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ul</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.ul({_class:</span><span class="jscript1-string">'ageTemplatesList'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        	</span><span class="jscript1-identifier">$.each(_templates,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(index,</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">value)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{</span><span class="jscript1-space"> 
        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">li</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.li({});
</span><span class="jscript1-space">        		</span><span class="jscript1-identifier">li.append(value.name);
</span><span class="jscript1-space">        		</span><span class="jscript1-identifier">ul.append(li);
</span><span class="jscript1-space">        		</span><span class="jscript1-identifier">AgeTemplates.bind(li,index);
</span><span class="jscript1-space">        	</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.contener!=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.contener.append(ul);
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}</span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'Es stehen keine Templates zu VerfÃ¼gung.'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'w'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    		
    
    </span><span class="jscript1-symbol">}
};

</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameCreator(game)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenCreator=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.footerBar</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">;</span><span class="jscript1-comment">//new FooterBar();
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGameWrapper=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'GameCreatorWrapper'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'CreatorWrapper'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getResourcenCreator</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space">  </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenCreator;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.render</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameSetting(game);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">creatorWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGameWrapper();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gameSetting</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting.render();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenCreator</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ResourcenCreator(game);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">resourcenArea</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenCreator.render();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">footerBar</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.footerBar;</span><span class="jscript1-comment">//.render();
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">creatorWrapper.append(gameSetting);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">creatorWrapper.append(resourcenArea);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">creatorWrapper.append(footerBar);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">creatorWrapper;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
}


</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameSetting(game)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{

</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">game;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSettingview</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GameSetting'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersInputHiddenElements=HTMLRenderer.div({});
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor=HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'table.style.bgColor'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.bgColor});
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGameSettingWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">sw</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'GameSettingWrapper'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'Wrapper'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">sw.append(</span><span class="jscript1-string">'&lt;h2&gt;'</span><span class="jscript1-symbol">+AgeSettings.gameSettingTitle+</span><span class="jscript1-string">'&lt;/h2&gt;'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">sw;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};

</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getNameComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getInputTextComponent({id:</span><span class="jscript1-string">'GameSettingName'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'GameSettingInput'</span><span class="jscript1-symbol">,label:</span><span class="jscript1-string">'Speilname:'</span><span class="jscript1-symbol">,FOR:</span><span class="jscript1-string">'GameSettingNameInput'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">                    </span><span class="jscript1-identifier">bind:</span><span class="jscript1-string">'GameCreatorManager.gameCreator.gameSetting.setGameName(this.value)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'name'</span><span class="jscript1-symbol">,inputId:</span><span class="jscript1-string">'GameSettingNameInput'</span><span class="jscript1-symbol">,inputValue:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.name,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'15'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};

</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setGameName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(name){
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameSetting.setGameName: '</span><span class="jscript1-symbol">+name,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};

</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getPlayersSizeComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getInputTextComponent({id:</span><span class="jscript1-string">'GameSettingPlayers'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'GameSettingInput'</span><span class="jscript1-symbol">,label:</span><span class="jscript1-string">'Spieler Anzahl:'</span><span class="jscript1-symbol">,FOR:</span><span class="jscript1-string">'GameSettingPlayersInput'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">                    </span><span class="jscript1-identifier">bind:</span><span class="jscript1-string">'GameCreatorManager.gameCreator.gameSetting.setGamePlayersSize(this.value)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'playersSize'</span><span class="jscript1-symbol">,inputId:</span><span class="jscript1-string">'GameSettingPlayersInput'</span><span class="jscript1-symbol">,inputValue:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.playersSize,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'15'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};

</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setGamePlayersSize</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(playerssize){
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameSetting.setGamePlayersSize('</span><span class="jscript1-symbol">+playerssize+</span><span class="jscript1-string">')'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.playersSize</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">parseInt(playerssize);
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setPlayers=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersInputHiddenElements.empty();
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.players;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">player</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">players[i];
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersInputHiddenElements.append(HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'players['</span><span class="jscript1-symbol">+i+</span><span class="jscript1-string">'].angle'</span><span class="jscript1-symbol">,value:player.angle}));
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersInputHiddenElements.append(HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'players['</span><span class="jscript1-symbol">+i+</span><span class="jscript1-string">'].name'</span><span class="jscript1-symbol">,value:player.name}));
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersInputHiddenElements.append(HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'players['</span><span class="jscript1-symbol">+i+</span><span class="jscript1-string">'].style.left'</span><span class="jscript1-symbol">,value:player.style.left}));
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersInputHiddenElements.append(HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'players['</span><span class="jscript1-symbol">+i+</span><span class="jscript1-string">'].style.top'</span><span class="jscript1-symbol">,value:player.style.top}));
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	
    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getWidthComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getInputTextComponent({id:</span><span class="jscript1-string">'GameSettingWidth'</span><span class="jscript1-symbol">,inputValue:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.width,_class:</span><span class="jscript1-string">'GameSettingInput'</span><span class="jscript1-symbol">,label:</span><span class="jscript1-string">'Breite:'</span><span class="jscript1-symbol">,FOR:</span><span class="jscript1-string">'GameSettingWidthInput'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">                    </span><span class="jscript1-identifier">bind:</span><span class="jscript1-string">'GameCreatorManager.gameCreator.gameSetting.setGameWidth(this.value)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'table.style.width'</span><span class="jscript1-symbol">,inputId:</span><span class="jscript1-string">'GameSettingWidthInput'</span><span class="jscript1-symbol">,inputValue:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.width,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'15'</span><span class="jscript1-symbol">});

</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};

</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setGameWidth</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(width){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">parseInt(width);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'this.game.table.style.width:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.width,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};

</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getHeightComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getInputTextComponent({id:</span><span class="jscript1-string">'GameSettingHeigth'</span><span class="jscript1-symbol">,inputValue:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.height,_class:</span><span class="jscript1-string">'GameSettingInput'</span><span class="jscript1-symbol">,label:</span><span class="jscript1-string">'HÃ¶he:'</span><span class="jscript1-symbol">,FOR:</span><span class="jscript1-string">'GameSettingWidthInput'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">                    </span><span class="jscript1-identifier">bind:</span><span class="jscript1-string">'GameCreatorManager.gameCreator.gameSetting.setGameHeight(this.value)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'table.style.height'</span><span class="jscript1-symbol">,inputId:</span><span class="jscript1-string">'GGameSettingWidthInput'</span><span class="jscript1-symbol">,inputValue:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.height,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'15'</span><span class="jscript1-symbol">});

</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};

</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setGameHeight</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(height){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">parseInt(height);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'game.table.style.height:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.height,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};

</span><span class="jscript1-space">     </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColorComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">inputColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputColorField(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'table.style.bgColorComponent'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'GameSettingBgColorInput'</span><span class="jscript1-symbol">,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.bgColor,_class:</span><span class="jscript1-string">'color'</span><span class="jscript1-symbol">,style:</span><span class="jscript1-string">'height:20px;width:20px;'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">            </span><span class="jscript1-comment">//GameCreatorManager.gameCreator.gameSetting.setGameBgColor
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">inputColorLabel</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.label({FOR:</span><span class="jscript1-string">'GameSettingBgColorInput'</span><span class="jscript1-symbol">,label:</span><span class="jscript1-string">'Background Color: '</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">GameCreatorManager.actions.push({action:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">,object:GameCreatorManager.gameCreator.gameSetting,domid:</span><span class="jscript1-string">'GameSettingBgColorInput'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.p(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GameSettingColor'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GameSettingInput'</span><span class="jscript1-symbol">}).append(inputColorLabel).append(inputColor);
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    
    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setBgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(bgcolor){
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.bgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">bgcolor;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,bgcolor);
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};

</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getInputTextComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">pn</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.p(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:p._class,content:HTMLRenderer.label({label</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.label,FOR:p.FOR})});
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">pn.append(HTMLRenderer.inputText({bind:p.bind,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.name,id:p.inputId,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.inputValue,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.size}));
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">pn;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setBGImage=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(fileName,tmp){
</span><span class="jscript1-space">    </span><span class="jscript1-comment">//	var _tmp = tmp &amp; true;
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(fileName){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSettingview.empty();
</span><span class="jscript1-space">   </span><span class="jscript1-comment">// 	if($.browser.mozilla || $.browser.msie){
</span><span class="jscript1-space">  </span><span class="jscript1-comment">//  		this.gameSettingview.append(HTMLRenderer.img({src:fileName}));
//		}else{
</span><span class="jscript1-space">    	
    	    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.imageTmpPath;
</span><span class="jscript1-space">    	    </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(GameManager.key</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!tmp)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.userImagePath+GameManager.key+</span><span class="jscript1-string">'/'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path+</span><span class="jscript1-string">'0_'</span><span class="jscript1-symbol">+fileName;
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameSetting.setBGImage:'</span><span class="jscript1-symbol">+fileName+</span><span class="jscript1-string">' tmp? '</span><span class="jscript1-symbol">+tmp+</span><span class="jscript1-string">' GameManager.key: '</span><span class="jscript1-symbol">+GameManager.key+</span><span class="jscript1-string">' AgeSettings.imageTmpPath+fileName:'</span><span class="jscript1-symbol">+image_path,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    	
	    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.imageName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">fileName;
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.imagesPath</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path;
</span><span class="jscript1-space">	    	
	    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.bgImage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image;
</span><span class="jscript1-space">	    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSettingview.append(</span><span class="jscript1-string">'&lt;img src=&quot;'</span><span class="jscript1-symbol">+image+</span><span class="jscript1-string">'&quot; style=&quot;width:170px;&quot;/&gt;'</span><span class="jscript1-symbol">);</span><span class="jscript1-comment">//css({backgroundImage:'url(&quot;'+image_path+'&quot;)'});
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-comment">//		}
</span><span class="jscript1-space">    	
    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.render</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">settingWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGameSettingWrapper();

</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getNameComponent());
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getPlayersSizeComponent());
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getWidthComponent());
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getHeightComponent());
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColorComponent());
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.playersInputHiddenElements);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">inputFile</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputImageField({bind:</span><span class="jscript1-string">'GameCreatorManager.gameCreator.gameSetting.setBGImage'</span><span class="jscript1-symbol">,name:</span><span class="jscript1-string">'table.style.bgImage'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'GameSettingImageInput'</span><span class="jscript1-symbol">,size:</span><span class="jscript1-string">'10'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">inputFileLabel</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.label({FOR:</span><span class="jscript1-string">'GameSettingImageInput'</span><span class="jscript1-symbol">,label:</span><span class="jscript1-string">'Background Image: '</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting.append(HTMLRenderer.p(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GameSettingImage'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GameSettingInput'</span><span class="jscript1-symbol">}).append(inputFileLabel).append(inputFile));

</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSettingview</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'GameSettingView'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(GameManager.key</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setBGImage(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.game.table.style.imageName,</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">settingWrapper.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSetting);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">settingWrapper.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.gameSettingview</span><span class="jscript1-space"> </span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">settingWrapper.append(HTMLRenderer.clear);
</span><span class="jscript1-space">		
		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">settingWrapper;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
}
</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ResourcenCreator(game)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenWrapper=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenFotoer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenContent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupList</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.hiddenGroupsSizeComponent=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupIdSec=</span><span class="jscript1-number">0</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.removeGroup=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(grp){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups[i].id){
</span><span class="jscript1-space">    			</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'LÃ¶sche Gruppe mit DOMID:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups[i].groupWrapper.attr(</span><span class="jscript1-string">'id'</span><span class="jscript1-symbol">),</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups[i].groupWrapper.remove();
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups[i].id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">             </span><span class="jscript1-comment">//       this.hiddenGroupsSizeComponent.value =  parseInt(this.hiddenGroupsSizeComponent.value)-1;
</span><span class="jscript1-space">             </span><span class="jscript1-comment">//       this.groups.splice(i, 1);
</span><span class="jscript1-space">             </span><span class="jscript1-comment">//       break;
</span><span class="jscript1-space">            </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">       </span><span class="jscript1-symbol">}</span><span class="jscript1-space">  
    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.newGroup=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(action,grp)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_action</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">action</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">idSec</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'new-'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupIdSec;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(_grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">idSec=_grp.getDomId()==</span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">?</span><span class="jscript1-space"> </span><span class="jscript1-identifier">idSec</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_grp.getDomId();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupIdSec++;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">newGroup</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GroupCreator(idSec,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups.length);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">newGroup.setGroup(_grp);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups.push(newGroup);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(_action)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GameCreatorManager.actions.push({action:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">,object:newGroup,domid:newGroup.getBgColorComponentId()});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupList.append(newGroup.render());
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.hiddenGroupsSizeComponent.attr({value:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups.length});
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.render=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.hiddenGroupsSizeComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.hiddenGroupsSizeComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'resourcenSize'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-string">'0'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupList</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupList</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGroupList();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array();
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setResourcen(game.ressourcen,</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">         </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">		
		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createResourcenWrapper();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenContent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenContent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createResourcenContent();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenFotoer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenFotoer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createResourcenFooter();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenContent.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupList);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenContent.append(HTMLRenderer.clear());
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenWrapper.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenContent);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenWrapper.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.hiddenGroupsSizeComponent);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenWrapper.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenFotoer);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.resourcenWrapper;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setResourcen</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(ressourcen,action){
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(ressourcen.length==</span><span class="jscript1-number">0</span><span class="jscript1-symbol">)</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.newGroup(action,</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ressourcen.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.newGroup(action,ressourcen[i]);
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getResourcen</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groups</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'ResourcenCreator.getResourcen - this.groups.length:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups.length,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groups[i];</span><span class="jscript1-space">		
			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">				</span><span class="jscript1-identifier">grp.group.items</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp.getItems();
</span><span class="jscript1-space">                 </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'--ResourcenCreator.getResourcen grp.group.items.length:'</span><span class="jscript1-symbol">+(grp.group.items.length)+</span><span class="jscript1-string">' - groups.push(grp.group).'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">				</span><span class="jscript1-identifier">groups.push(grp.group);
</span><span class="jscript1-space">			</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">groups;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGroupList</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({});
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createResourcenWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">rw</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'ResourcenWrapper'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'Wrapper'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">rw.append(</span><span class="jscript1-string">'&lt;h2&gt;Resourcen&lt;/h2&gt;'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">rw;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createResourcenContent=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id:</span><span class="jscript1-string">'ResourcenContent'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'Content'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createResourcenFooter=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">footer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'ResourcenFooterBar'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'ResourcenFooterBar'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        
		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_template</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({_class:</span><span class="jscript1-string">'RsrcnFooterButton'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_template_show</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.buttonItem({_class:</span><span class="jscript1-string">'RsrcnFooter'</span><span class="jscript1-symbol">,title:</span><span class="jscript1-string">'Load from template'</span><span class="jscript1-symbol">,image:</span><span class="jscript1-string">'template.png'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_template_list</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({}).css({display:</span><span class="jscript1-string">'none'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">_template.append(_template_show);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">_template.append(_template_list);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_new</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.buttonItem({_class:</span><span class="jscript1-string">'RsrcnFooter'</span><span class="jscript1-symbol">,title:</span><span class="jscript1-string">'Neue Group'</span><span class="jscript1-symbol">,image:</span><span class="jscript1-string">'new.png'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_edit</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.buttonItem({_class:</span><span class="jscript1-string">'RsrcnFooter'</span><span class="jscript1-symbol">,title:</span><span class="jscript1-string">'Edit Group'</span><span class="jscript1-symbol">,image:</span><span class="jscript1-string">'edit.png'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_del</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.buttonItem({_class:</span><span class="jscript1-string">'RsrcnFooter'</span><span class="jscript1-symbol">,title:</span><span class="jscript1-string">'Delete Group'</span><span class="jscript1-symbol">,image:</span><span class="jscript1-string">'delete.png'</span><span class="jscript1-symbol">});

</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">thisRes</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">AgeTemplates.contener=_template_list;
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">AgeTemplates.create(GameCreatorManager.templates);

</span><span class="jscript1-space">		</span><span class="jscript1-identifier">_template_show.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{_template_list.css({display:</span><span class="jscript1-string">'block'</span><span class="jscript1-symbol">});});
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">_new.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{GameCreatorManager.addGroup(thisRes);});
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">_del.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{alert(</span><span class="jscript1-string">'uppss.. noch nicht implementiert.'</span><span class="jscript1-symbol">);});
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">_edit.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{alert(</span><span class="jscript1-string">'uppss.. noch nicht implementiert.'</span><span class="jscript1-symbol">);});

</span><span class="jscript1-space">		
		</span><span class="jscript1-identifier">footer.append(_new);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">footer.append(_edit);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">footer.append(_del);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">footer.append(_template);

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">footer;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
}
</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">GroupCreator(id,index)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.index</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">index;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'GameCreatorManager.gameCreator.resourcenCreator.groups['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">']'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupContener</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.hiddenItemsSizeComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Group();
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView=HTMLRenderer.div({_class:</span><span class="jscript1-string">'bgImageView'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.itemIdSec=</span><span class="jscript1-number">0</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.zIndex=HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].style.zIndex'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.zIndex});
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top=HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].style.top'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.top});
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left=HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].style.left'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.left});
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor=HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].style.bgColor'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.bgColor});
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setGroup=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(grp){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(grp</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">grp;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getItems=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GroupCreator.getItems this.items.length:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itms</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array();
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[i];
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itm.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'--GroupCreator.getItems - itms.push(itm.item)'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_item=itm.getItem();
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">_item.group=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group;
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">itms.push(_item);
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itms;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.removeItem</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(itm_id){
</span><span class="jscript1-space">                  
             </span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itm_id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[i].id){
</span><span class="jscript1-space">                    </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'LÃ¶sche Element mit DOMID:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[i].itemWrapper.attr(</span><span class="jscript1-string">'id'</span><span class="jscript1-symbol">),</span><span class="jscript1-string">'i'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[i].itemWrapper.remove();
</span><span class="jscript1-space">                    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items[i].id=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;</span><span class="jscript1-space">                
                    </span><span class="jscript1-comment">//this.items.splice(i, 1);
</span><span class="jscript1-space">               </span><span class="jscript1-comment">//     break;
</span><span class="jscript1-space">                </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">             </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.newItem</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(action,itm)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_action</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">action</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">||</span><span class="jscript1-space">  </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id+</span><span class="jscript1-string">'-new-'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.itemIdSec;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(_itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_id=_itm.getDomId()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">?</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_itm.getDomId();
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.itemIdSec++;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">newItem</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ItemCreator(_id,[index,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length]);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">newItem.setItem(_itm);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.push(newItem);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupContener.append(newItem.render());
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(_action){
</span><span class="jscript1-space">			 </span><span class="jscript1-identifier">GameCreatorManager.actions.push({action:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">,object:newItem,domid:newItem.getBgColorComponentId()});
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GGroupCreator.render:  GameCreatorManager.actions.push: tmpItem.getBgColorComponentId():'</span><span class="jscript1-symbol">+newItem.getBgColorComponentId(),</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			 </span><span class="jscript1-identifier">GameCreatorManager.update();
</span><span class="jscript1-space">		        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GameCreatorManager.addItem _id:'</span><span class="jscript1-symbol">+_id,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		        </span><span class="jscript1-identifier">$(</span><span class="jscript1-string">'#'</span><span class="jscript1-symbol">+newItem.getBgColorComponentId()).bind(</span><span class="jscript1-string">'colorpicked'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		                    </span><span class="jscript1-identifier">newItem.setBgColor($(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">).val());
</span><span class="jscript1-space">		             </span><span class="jscript1-symbol">});</span><span class="jscript1-space">       
		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">       
        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.hiddenItemsSizeComponent.attr({value:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items.length});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">newItem;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	
	</span><span class="jscript1-comment">/*
	 * 
	 *    var tmpItem = new ItemCreator(id+'-'+this.itemIdSec,[index,0]); ok
                    this.itemIdSec++;
                    this.items = new Array(tmpItem);
                    GameCreatorManager.actions.push({action:'',object:tmpItem,domid:tmpItem.getBgColorComponentId()});
                    if(debug) Log('GGroupCreator.render:  GameCreatorManager.actions.push: tmpItem.getBgColorComponentId():'+tmpItem.getBgColorComponentId(),'d');
                    this.hiddenItemsSizeComponent.attr({value:''+this.items.length});
	 * 
	 * 
	 */

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getNameComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GroupCreator getNameComponent:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.name,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputText({bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setName(this.value)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].name'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GrpSttngNm'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'GroupSettingNameInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.name,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'8'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(name){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">name;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getWidth</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.width==</span><span class="jscript1-string">''</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.width;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getHeight</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.height==</span><span class="jscript1-string">''</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.height;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.name==</span><span class="jscript1-string">''</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.name;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getStackedComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputImageCheckBox({bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setStacked(this.checked)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].stacked'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GrpSttngStckd'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'GroupSettingStckdInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+
</span><span class="jscript1-space">                    </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'true'</span><span class="jscript1-symbol">,checked:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.stacked,title:</span><span class="jscript1-string">'(nicht) gestappelt'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setStacked</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(stacked){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GroupCreator.setStacked:'</span><span class="jscript1-symbol">+stacked,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.stacked</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">stacked;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getVisibilityComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputImageCheckBox({bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setVisibility(this.checked)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].visibility'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GrpSttngVsblt ElmntVsblt'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">id:</span><span class="jscript1-string">'GroupSettingVsbltInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-string">'true'</span><span class="jscript1-symbol">,checked:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.visibility,title:</span><span class="jscript1-string">'(un)sichtbar'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setVisibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(visibility){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.visibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">visibility;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getOrderComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputImageCheckBox({bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setOrder(this.checked)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].order'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GrpSttngOrdr'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'GroupSettingOrdrInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+
</span><span class="jscript1-space">                    </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-string">'true'</span><span class="jscript1-symbol">,checked:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.order,title:</span><span class="jscript1-string">'(un)geordnet'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setOrder</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(order){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.order</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">order;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getRandomgeneratorComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputImageCheckBox({bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setRandomgenerator(this.checked)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].randomgenerator'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GrpSttngRndm'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'GroupSettingRndmInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+
</span><span class="jscript1-space">                    </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'true'</span><span class="jscript1-symbol">,checked:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.randomgenerator,title:</span><span class="jscript1-string">'(nicht) zufallig'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setRandomgenerator</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(randomgenerator){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.randomgenerator</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">randomgenerator;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getSizeComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">span</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.span({});
</span><span class="jscript1-space">             </span><span class="jscript1-identifier">span.append(</span><span class="jscript1-string">'size:'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">             </span><span class="jscript1-identifier">span.append(HTMLRenderer.inputText(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setWidth(this.value)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].style.width'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GrpSttngSz'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">                 </span><span class="jscript1-identifier">id:</span><span class="jscript1-string">'GroupSettingWidthInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.width,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'1'</span><span class="jscript1-symbol">}));
</span><span class="jscript1-space">             </span><span class="jscript1-identifier">span.append(</span><span class="jscript1-string">'x'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">             </span><span class="jscript1-identifier">span.append(HTMLRenderer.inputText(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setHeight(this.value)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].style.height'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GrpSttngSz'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'GroupSettingHeightInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.height,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'1'</span><span class="jscript1-symbol">}));
</span><span class="jscript1-space">	     </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">span;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setWidth</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(w){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_w</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">parseInt(w);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!isNaN(_w))</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.width=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_w;
</span><span class="jscript1-space">            
            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GroupCreator.this.setWidth:'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.width,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setHeight</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(h){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_h</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">parseInt(h);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!isNaN(_h))</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_h;
</span><span class="jscript1-space">            
        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColorComponentId=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-string">'GameSettingBgColorInput-'</span><span class="jscript1-symbol">+id;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColorComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputColorField(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].style.bgColorComponent'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColorComponentId(),value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.bgColor,_class:</span><span class="jscript1-string">'color'</span><span class="jscript1-symbol">,style:</span><span class="jscript1-string">'height:18px;width:18px;'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setBgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(bgcolor){
</span><span class="jscript1-space">        	</span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'setBgColor:'</span><span class="jscript1-symbol">+bgcolor,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,bgcolor);
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.bgColor=bgcolor;
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgImageComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputImageIcon({bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setBGImage'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'GrpBgInptCntnr'</span><span class="jscript1-symbol">,width:</span><span class="jscript1-number">20</span><span class="jscript1-symbol">,height:</span><span class="jscript1-number">20</span><span class="jscript1-symbol">,src:</span><span class="jscript1-string">'image.png'</span><span class="jscript1-symbol">,name:</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].style.bgImage'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setBGImage=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(fileName,tmp){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(fileName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">fileName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.imageTmpPath;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(GameManager.key</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!tmp)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.userImagePath+GameManager.key+</span><span class="jscript1-string">'/'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path+</span><span class="jscript1-string">'0_'</span><span class="jscript1-symbol">+fileName;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'GroupCreator.setBGImage:'</span><span class="jscript1-symbol">+fileName+</span><span class="jscript1-string">' _tmp? '</span><span class="jscript1-symbol">+tmp+</span><span class="jscript1-string">' GameManager.key:'</span><span class="jscript1-symbol">+GameManager.key+</span><span class="jscript1-string">' AgeSettings.imageTmpPath+fileName:'</span><span class="jscript1-symbol">+image_path,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.imageName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">fileName;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.imagesPath</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.bgImage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image;
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView.empty();
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView.append(</span><span class="jscript1-string">'&lt;img src=&quot;'</span><span class="jscript1-symbol">+image+</span><span class="jscript1-string">'&quot;/&gt;'</span><span class="jscript1-symbol">);</span><span class="jscript1-space">	
        	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgImageNameComponent=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].style.bgImageName'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.bgImage});
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGroupSetting</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-string">'GroupSetting-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style._class=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.getDomIdPrefix();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gs</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid</span><span class="jscript1-space"> </span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GroupSetting'</span><span class="jscript1-symbol">,position:</span><span class="jscript1-string">'relative'</span><span class="jscript1-symbol">});

</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">div_left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GrpSettingLft'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">div_left.append(HTMLRenderer.checkBox({}));

</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">div_center</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GrpSettingCntr'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(GameManager.key</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!AgeUtil.isNull(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.imageName))</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setBGImage(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.imageName);
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">                	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!AgeUtil.isNull(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.bgImage)){
</span><span class="jscript1-space">                		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView.empty();
</span><span class="jscript1-space">                		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView.append(</span><span class="jscript1-string">'&lt;img src=&quot;'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.style.bgImage+</span><span class="jscript1-string">'&quot;/&gt;'</span><span class="jscript1-symbol">);</span><span class="jscript1-space">	
                	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">                </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">div_center.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView);
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ul</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.ul();
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getNameComponent()}));
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getVisibilityComponent()}));
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getOrderComponent()}));
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getStackedComponent()}));
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getRandomgeneratorComponent()}));
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColorComponent()}));
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getSizeComponent()}));
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgImageComponent()}));
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">div_center.append(ul);
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">div_center.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgImageNameComponent());
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">div_center.append(HTMLRenderer.clear());

</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">div_right</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GrpSettingRght'</span><span class="jscript1-symbol">});

</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_close</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.buttonItem({image:</span><span class="jscript1-string">'closed.png'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'closebttn'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">thisGroup</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;

</span><span class="jscript1-space">                </span><span class="jscript1-identifier">_close.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{GameCreatorManager.closeGroup(thisGroup);});

</span><span class="jscript1-space">                </span><span class="jscript1-identifier">div_right.append(_close);

</span><span class="jscript1-space">                </span><span class="jscript1-identifier">gs.append(div_left);
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">gs.append(div_center);
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">gs.append(div_right);
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">gs.append(HTMLRenderer.clear());

</span><span class="jscript1-space">                </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">gs;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setItems=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(itms,action){
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itms.length==</span><span class="jscript1-number">0</span><span class="jscript1-symbol">)</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.newItem(action,</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">for</span><span class="jscript1-space"> </span><span class="jscript1-symbol">(</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-number">0</span><span class="jscript1-symbol">;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&lt;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itms.length;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">i++)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">tmp_itm=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.newItem(action,itms[i]);
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.render</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.hiddenItemsSizeComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.hiddenItemsSizeComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].items'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-string">'0'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGroupWrapper();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupContener</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupContener</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGroupContener();
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){</span><span class="jscript1-space">	
			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.items</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">Array();
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setItems(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.items,</span><span class="jscript1-reservedword">true</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">			</span><span class="jscript1-comment">/*
                    var tmpItem = new ItemCreator(id+'-'+this.itemIdSec,[index,0]);
                    this.itemIdSec++;
                    this.items = new Array(tmpItem);
                    GameCreatorManager.actions.push({action:'',object:tmpItem,domid:tmpItem.getBgColorComponentId()});
                    if(debug) Log('GGroupCreator.render:  GameCreatorManager.actions.push: tmpItem.getBgColorComponentId():'+tmpItem.getBgColorComponentId(),'d');
                    this.hiddenItemsSizeComponent.attr({value:''+this.items.length});
                    */
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">  

		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id;

</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupWrapper.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGroupSetting());
</span><span class="jscript1-space">		</span><span class="jscript1-comment">/*
		for ( var i = 0; i &lt; this.items.length; i++) {
			var itemCreator = this.items[i];
			this.groupContener.append(itemCreator.render());
		}
		*/
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupContener.append(HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].id'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.id}));
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">tmpl_e</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.templateId</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">tmpl_e</span><span class="jscript1-space">  </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index+</span><span class="jscript1-string">'].templateId'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.templateId});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupContener.append(tmpl_e);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupContener.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupContener.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupContener.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor);
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.group.setPositionComponent({left:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left,top:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top,zIndex:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.zIndex});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupWrapper.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupContener);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupWrapper.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.hiddenItemsSizeComponent);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupWrapper.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGroupFooterBar());

</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.groupWrapper;

</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGroupContener</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GroupContener-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GroupContener'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGroupWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'GroupWrapper-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GroupWrapper'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createGroupFooterBar</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{

</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">footer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GroupFooterBar-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'GroupFooterBar'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_new</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.buttonItem(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'grpFooter'</span><span class="jscript1-symbol">,title</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'Neue Item'</span><span class="jscript1-symbol">,image</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'new.png'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_edit</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.buttonItem(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'grpFooter'</span><span class="jscript1-symbol">,title</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'Edit Item'</span><span class="jscript1-symbol">,image</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'edit.png'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_del</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.buttonItem(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'grpFooter'</span><span class="jscript1-symbol">,title</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'Delete Item'</span><span class="jscript1-symbol">,image</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'delete.png'</span><span class="jscript1-symbol">});

</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">thisGroup</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">;

</span><span class="jscript1-space">		</span><span class="jscript1-identifier">_new.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{GameCreatorManager.addItem(thisGroup);});
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">_del.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{alert(</span><span class="jscript1-string">'uppss.. noch nicht implementiert.'</span><span class="jscript1-symbol">);});
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">_edit.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{alert(</span><span class="jscript1-string">'uppss.. noch nicht implementiert.'</span><span class="jscript1-symbol">);});
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">footer.append(_new);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">footer.append(_edit);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">footer.append(_del);

</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">footer;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">};
}

</span><span class="jscript1-reservedword">function</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ItemCreator(id,index)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'ItemWrapper-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">._class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">new</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Item();
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.itemWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'GameCreatorManager.gameCreator.resourcenCreator.groups['</span><span class="jscript1-symbol">+index[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">]+</span><span class="jscript1-string">'].items['</span><span class="jscript1-symbol">+index[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">]+</span><span class="jscript1-string">']'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix=</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">]+</span><span class="jscript1-string">'].items['</span><span class="jscript1-symbol">+index[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">]+</span><span class="jscript1-string">']'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView=HTMLRenderer.div({_class:</span><span class="jscript1-string">'bgImageView'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.zIndex=HTMLRenderer.inputHidden({name:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.style.zIndex'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.zIndex});
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top=HTMLRenderer.inputHidden({name:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.style.top'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.top});
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left=HTMLRenderer.inputHidden({name:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.style.left'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.left});
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor=HTMLRenderer.inputHidden({name:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.style.bgColor'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.bgColor});
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getItem</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">==</span><span class="jscript1-space"> </span><span class="jscript1-symbol">-</span><span class="jscript1-number">1</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setItem=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(itm){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">    		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm;
</span><span class="jscript1-space">    		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.top);
</span><span class="jscript1-space">    		 </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.left);
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getNameComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputText({bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setName(this.value)'</span><span class="jscript1-symbol">,label</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">        	</span><span class="jscript1-non-reservedkeyword">name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.name'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'ItemNmInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space">  </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.name,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'5'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(name){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.name=name;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.name==</span><span class="jscript1-string">''</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.name;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getCountComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputText({bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setCount(this.value)'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">        	</span><span class="jscript1-non-reservedkeyword">name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.size'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'ItemStInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space">  </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.count,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'5'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setCount</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(count){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'ItemCreator.setCount:'</span><span class="jscript1-symbol">+count,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_c</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">parseInt(count);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!isNaN(_c))</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.count=_c;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getVisibilityComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputImageCheckBox({name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.visibility'</span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'ItemVsblt  ElmntVsblt'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'ItemVsbltInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+
</span><span class="jscript1-space">                </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'true'</span><span class="jscript1-symbol">,checked:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.visibility,title:</span><span class="jscript1-string">'(un)sichtbar'</span><span class="jscript1-symbol">,bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setVisibility(this.checked)'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setVisibility</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(visibility){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.visibility=visibility;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getSizeComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">span</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.span({});
</span><span class="jscript1-space">             </span><span class="jscript1-identifier">span.append(</span><span class="jscript1-string">'size:'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">             </span><span class="jscript1-identifier">span.append(HTMLRenderer.inputText(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setWidth(this.value)'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">            	 </span><span class="jscript1-non-reservedkeyword">name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.style.width'</span><span class="jscript1-symbol">,
</span><span class="jscript1-space">                 </span><span class="jscript1-identifier">id:</span><span class="jscript1-string">'ItemWidthInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.width,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'1'</span><span class="jscript1-symbol">}));
</span><span class="jscript1-space">             </span><span class="jscript1-identifier">span.append(</span><span class="jscript1-string">'x'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">             </span><span class="jscript1-identifier">span.append(HTMLRenderer.inputText(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setHeight(this.value)'</span><span class="jscript1-symbol">,name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.style.height'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-string">'ItemHeightInput-'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">id,value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.height,size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'1'</span><span class="jscript1-symbol">}));
</span><span class="jscript1-space">	     </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">span;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setWidth</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(width){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_w</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">parseInt(width);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!isNaN(_w))</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.width=_w;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'ItemCreator.setWidth: '</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.width+</span><span class="jscript1-string">' id:'</span><span class="jscript1-symbol">+id+</span><span class="jscript1-string">',index'</span><span class="jscript1-symbol">+index,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setHeight</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(height){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_h</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">parseInt(height);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!isNaN(_h))</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.height=_h;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'ItemCreator.setHeight: '</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.width,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getWidth</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.width;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getHeight</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.height;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgImageNameComponent=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputHidden({name:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.style.bgImageName'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.bgImage});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-comment">/*
    this.setPosition=function(pos){
    	this.top.attr('left',pos.left);
    	this.item.style.left=pos.left;
    	this.top.attr('top',pos.top);
    	this.item.style.top=pos.top;
    };
    */
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setBgColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(bgcolor){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.bgColor=bgcolor;
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor.attr(</span><span class="jscript1-string">'value'</span><span class="jscript1-symbol">,bgcolor);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'ItemCreator.setBgColort: '</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.bgColor,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColorComponentId=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-string">'ItemBgColorInput-'</span><span class="jscript1-symbol">+id;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColorComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputColorField(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{name</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.style.bgColorComponent'</span><span class="jscript1-symbol">,id:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColorComponentId(),value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.bgColor,_class:</span><span class="jscript1-string">'color'</span><span class="jscript1-symbol">,style:</span><span class="jscript1-string">'height:18px;width:18px;'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgImageComponent</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputImageIcon({bind:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.componentBind+</span><span class="jscript1-string">'.setBgImage'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'ItemBgInptCntnr'</span><span class="jscript1-symbol">,width:</span><span class="jscript1-number">17</span><span class="jscript1-symbol">,height:</span><span class="jscript1-number">17</span><span class="jscript1-symbol">,src:</span><span class="jscript1-string">'image.png'</span><span class="jscript1-symbol">,name:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.namePrefix+</span><span class="jscript1-string">'.style.bgImage'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setBgImage=</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(fileName,tmp){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(fileName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-identifier">fileName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.imageTmpPath;
</span><span class="jscript1-space"> 	    </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(GameManager.key</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!tmp)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">AgeSettings.userImagePath+GameManager.key+</span><span class="jscript1-string">'/'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space"> 	    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path+</span><span class="jscript1-string">'0_'</span><span class="jscript1-symbol">+fileName;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'ItemCreator.setBGImage:'</span><span class="jscript1-symbol">+fileName+</span><span class="jscript1-string">' tmp? '</span><span class="jscript1-symbol">+tmp+</span><span class="jscript1-string">' AgeSettings.imageTmpPath+fileName:'</span><span class="jscript1-symbol">+image_path,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.imageName</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">fileName;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.imagesPath</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_path;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.bgImage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView.empty();
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView.append(</span><span class="jscript1-string">'&lt;img src=&quot;'</span><span class="jscript1-symbol">+image+</span><span class="jscript1-string">'&quot;/&gt;'</span><span class="jscript1-symbol">);</span><span class="jscript1-space">	
    	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">    	
    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.render</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style._class=</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.getDomIdPrefix();
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.itemWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createItemWrapper();
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">div_left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'ItmWrpprLft'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_left.append(HTMLRenderer.checkBox({}));
</span><span class="jscript1-comment">//        div_left.append(HTMLRenderer.p({content:(index[1]+1)}));

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">div_center</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'ItmWrpprCntr'</span><span class="jscript1-symbol">});

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">div_right</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'ItmWrpprRght'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(GameManager.key</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-space"> </span><span class="jscript1-symbol">&amp;&amp;</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!AgeUtil.isNull(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.imageName))</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.setBgImage(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.imageName,</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(!AgeUtil.isNull(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.bgImage)){
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView.empty();
</span><span class="jscript1-space">        		</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView.append(</span><span class="jscript1-string">'&lt;img src=&quot;'</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.style.bgImage+</span><span class="jscript1-string">'&quot;/&gt;'</span><span class="jscript1-symbol">);</span><span class="jscript1-space">	
        	</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-symbol">}
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_center.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgImageView);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">ul</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.ul();
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getNameComponent(),_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'ItemNm'</span><span class="jscript1-symbol">}));
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getCountComponent(),_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-string">'ItemSt'</span><span class="jscript1-symbol">}));
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getVisibilityComponent()}));
</span><span class="jscript1-space">	    </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getSizeComponent(),_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'ItemSz'</span><span class="jscript1-symbol">}));
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgColorComponent()}));
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">ul.append(HTMLRenderer.li({content:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgImageComponent()}));
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_center.append(ul);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_center.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_center.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_center.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.bgColor);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_center.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.getBgImageNameComponent());
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.setPositionComponent({left:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.left,top:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.top,zIndex:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.zIndex});</span><span class="jscript1-space"> </span><span class="jscript1-comment">//groupBy
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_center.append(HTMLRenderer.inputHidden({name:</span><span class="jscript1-string">'resourcen['</span><span class="jscript1-symbol">+index[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">]+</span><span class="jscript1-string">'].items['</span><span class="jscript1-symbol">+index[</span><span class="jscript1-number">1</span><span class="jscript1-symbol">]+</span><span class="jscript1-string">'].id'</span><span class="jscript1-symbol">,value:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">+</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.item.id}));
</span><span class="jscript1-space">    </span><span class="jscript1-comment">//    div_center.append(HTMLRenderer.inputHidden({name:'resourcen['+index[0]+'].items['+index[1]+'].groupBy',value:''+this.item.groupBy}));

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">_close</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.buttonItem({image:</span><span class="jscript1-string">'closed.png'</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'closebttn'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_right.append(_close);

</span><span class="jscript1-space">        </span><span class="jscript1-identifier">_close.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{GameCreatorManager.gameCreator.resourcenCreator.groups[index[</span><span class="jscript1-number">0</span><span class="jscript1-symbol">]].removeItem(id);});


</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.itemWrapper.append(div_left);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.itemWrapper.append(div_center);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.itemWrapper.append(div_right);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.itemWrapper.append(HTMLRenderer.clear());

</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.itemWrapper;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
</span><span class="jscript1-space">    </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.createItemWrapper</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.domid</span><span class="jscript1-space"> </span><span class="jscript1-symbol">,_class</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-string">'ItemWrapper'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">};
}

</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{

</span><span class="jscript1-space">    </span><span class="jscript1-identifier">p:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(params){
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'p'</span><span class="jscript1-symbol">)).attr({id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">params.id}).addClass(params._class).append(params.content);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">label:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'label'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id,FOR:p.FOR,title:p.title}).addClass(p._class).append(p.label);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">inputHidden:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'input'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{name:p.name,value:p.value,type:</span><span class="jscript1-string">'hidden'</span><span class="jscript1-symbol">,id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id}).addClass(p._class);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">inputText:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">input</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'input'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{name:p.name,value:p.value,type:</span><span class="jscript1-string">'text'</span><span class="jscript1-symbol">,id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id,size:p.size}).addClass(p._class);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(p.bind</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">input.bind(</span><span class="jscript1-string">'change click keyup'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{eval(p.bind);});
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'inputtext name:'</span><span class="jscript1-symbol">+p.name+</span><span class="jscript1-string">' value:'</span><span class="jscript1-symbol">+p.value,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">input;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">checkBox:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'input'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{checked:p.checked,name:p.name,value:p.value,type:</span><span class="jscript1-string">'checkbox'</span><span class="jscript1-symbol">,id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id}).addClass(p._class);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">inputCheckBox</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(params)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">input</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.label(params);
</span><span class="jscript1-space">            </span><span class="jscript1-non-reservedkeyword">input.after(HTMLRenderer.checkBox(params));
</span><span class="jscript1-space">            </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">input;
</span><span class="jscript1-space">     </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">span:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'span'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id}).addClass(p._class);
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">inputImageCheckBox</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">span</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.span({});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">checkBX</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.checkBox(p);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">label</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.label({_class:p._class,FOR:p.id});
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">($.browser.msie){
</span><span class="jscript1-space">			</span><span class="jscript1-identifier">label.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){

</span><span class="jscript1-space">		</span><span class="jscript1-comment">//		var it = document.getElementById(this.htmlFor);
</span><span class="jscript1-space">			</span><span class="jscript1-comment">//	alert(this.style.backgroundImage);
</span><span class="jscript1-space">		</span><span class="jscript1-comment">//		});

</span><span class="jscript1-space">			</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">else</span><span class="jscript1-symbol">{
</span><span class="jscript1-space">			</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(p.bind</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">checkBX.bind(</span><span class="jscript1-string">'click'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">()</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{eval(p.bind);});
</span><span class="jscript1-space">		</span><span class="jscript1-symbol">}
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">span.append(checkBX);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">span.append(label);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">span;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">inputTextField</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(params)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">input</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">''</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(params.label</span><span class="jscript1-space"> </span><span class="jscript1-symbol">!=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">input</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-string">'&lt;label for=&quot;'</span><span class="jscript1-symbol">+params.id+</span><span class="jscript1-string">'&quot;&gt;'</span><span class="jscript1-symbol">+params.label+</span><span class="jscript1-string">'&lt;/label&gt;'</span><span class="jscript1-symbol">;

</span><span class="jscript1-space">		</span><span class="jscript1-non-reservedkeyword">input</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+=</span><span class="jscript1-space"> </span><span class="jscript1-string">'&lt;input type=&quot;text&quot; id=&quot;'</span><span class="jscript1-symbol">+params.id</span><span class="jscript1-space">	</span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-string">'&quot; size=&quot;'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">params.size</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-string">'&quot; name=&quot;'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">params.name+</span><span class="jscript1-string">'&quot; value=&quot;'</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-identifier">params.value</span><span class="jscript1-space"> </span><span class="jscript1-symbol">+</span><span class="jscript1-space"> </span><span class="jscript1-string">'&quot;/&gt;'</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">input;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">inputColorField</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(param)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">colorPicker</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'input'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">param.id,TYPE:</span><span class="jscript1-string">'color'</span><span class="jscript1-symbol">,name:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">param.name,style:param.style,value:param.value,text:</span><span class="jscript1-string">'hidden'</span><span class="jscript1-symbol">})
</span><span class="jscript1-space">			</span><span class="jscript1-symbol">.addClass(param._class);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">colorPicker;

</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">inputImageField</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(param)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{</span><span class="jscript1-space">  	
    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">file_input</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'input'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">param.id,TYPE:</span><span class="jscript1-string">'file'</span><span class="jscript1-symbol">,name:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">param.name,size:param.size}).addClass(param._class);
</span><span class="jscript1-space">    	</span><span class="jscript1-identifier">file_input.bind(</span><span class="jscript1-string">'change'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">    		</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'HTMLRenderer.inputImageField change ajax tmp.image='</span><span class="jscript1-symbol">+file_input.val(),</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    		</span><span class="jscript1-comment">//HTMLRenderer.img({src:file_input.getAsDataURL()}); //firefox !!!!
</span><span class="jscript1-space">    	</span><span class="jscript1-comment">//	Log(file_input.getAsDataURL(),'w');
</span><span class="jscript1-space">    	
    		
    		</span><span class="jscript1-comment">/*	if($.browser.mozilla){
    			eval(''+param.bind+'(\''+this.files[0].getAsDataURL()+'\')');
    		}else if($.browser.msie){
    			if(debug) Log('IMAGE PATH:'+this.val(),'d');
    			eval(''+param.bind+'(\''+this.val()+'\')');
    			
    		}else{*/
</span><span class="jscript1-space">    			</span><span class="jscript1-identifier">AgeUpdater.ajaxFileUpload({input:file_input,bind:param.bind});
</span><span class="jscript1-space">    	</span><span class="jscript1-comment">//	}
</span><span class="jscript1-space">    	
    			
    			</span><span class="jscript1-comment">//	$('body').append(HTMLRenderer.img({src:this.files[0].getAsDataURL(),alt:'alt'}));
</span><span class="jscript1-space">    	</span><span class="jscript1-comment">//	AgeUpdater.ajaxFileUpload({input:file_input,bind:param.bind});
</span><span class="jscript1-space">    	</span><span class="jscript1-comment">//	var onsubmit = ;
/*
    		form.submit(function() {
    			if(debug) Log('HTMLRenderer.inputImageField change ajax submit','d');
    			  alert($(this).serialize());
    			  return false;
    			});
    			*/
</span><span class="jscript1-space">    	</span><span class="jscript1-comment">/*	$.ajax({type: &quot;POST&quot;, url: &quot;/age/game/xhr.htm&quot;,
    			 data: .serialize(),
    			   success: function(msg){
    			 //    alert(msg);
    			     if(param.bind != null) eval(''+param.bind+'(\''+msg+'\')'); 
    			   }
    			 });*/
</span><span class="jscript1-space">    	</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">   </span><span class="jscript1-comment">// 	if(debug) Log('HTMLRenderer.inputImageField change bind:'+param.bind+'(msg)','d');
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">file_input;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    </span><span class="jscript1-identifier">inputImageIcon:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">imagePath=AgeSettings.imagePath;
</span><span class="jscript1-space">	    </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">div_inputImage</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.div({_class:p._class}).css({width:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.width,height:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.height,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">position:</span><span class="jscript1-string">'relative'</span><span class="jscript1-symbol">,overflow:</span><span class="jscript1-space"> </span><span class="jscript1-string">'hidden'</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">image_input</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.img({id:</span><span class="jscript1-string">''</span><span class="jscript1-symbol">,_class:</span><span class="jscript1-string">'GrpBgImg'</span><span class="jscript1-symbol">,alt:p.alt,src:(imagePath+p.src)}).css(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            </span><span class="jscript1-non-reservedkeyword">width:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.width,height:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.height,</span><span class="jscript1-space"> </span><span class="jscript1-identifier">position:</span><span class="jscript1-string">'absolute'</span><span class="jscript1-symbol">,zIndex:</span><span class="jscript1-number">50</span><span class="jscript1-symbol">});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">file_input</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">HTMLRenderer.inputImageField({bind:p.bind,name:p.name,_class:</span><span class="jscript1-string">'GrpBgInpt'</span><span class="jscript1-symbol">,size:</span><span class="jscript1-string">'1'</span><span class="jscript1-symbol">}).css(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">            </span><span class="jscript1-non-reservedkeyword">width:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.width,opacity:</span><span class="jscript1-number">0.0</span><span class="jscript1-symbol">,height:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.height,position:</span><span class="jscript1-string">'absolute'</span><span class="jscript1-symbol">,</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">zIndex:</span><span class="jscript1-number">100</span><span class="jscript1-symbol">});</span><span class="jscript1-space">   
        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">($.browser.mozilla)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">file_input.css(</span><span class="jscript1-string">'left'</span><span class="jscript1-symbol">,</span><span class="jscript1-string">'-35px'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_inputImage.append(file_input);
</span><span class="jscript1-space">        </span><span class="jscript1-identifier">div_inputImage.append(image_input);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">div_inputImage;
</span><span class="jscript1-space">	</span><span class="jscript1-symbol">},
</span><span class="jscript1-space">	</span><span class="jscript1-comment">//buttonItem und button kann man durch eine Definition erstetzen.

</span><span class="jscript1-space">    </span><span class="jscript1-identifier">buttonItem</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">		</span><span class="jscript1-comment">//wenn TYPE klein ist, gibt es ein Problem unter IE8 - &quot;JQuerry unterstï¿½tz dieser Aktion nicht&quot;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">imagePath=AgeSettings.imagePath;
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">button</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'button'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{TYPE:</span><span class="jscript1-string">'button'</span><span class="jscript1-symbol">,id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id,title:p.title}).addClass(p._class);
</span><span class="jscript1-space">		</span><span class="jscript1-identifier">button.append(</span><span class="jscript1-string">'&lt;img src=&quot;'</span><span class="jscript1-symbol">+imagePath+p.image+</span><span class="jscript1-string">'&quot;/&gt;'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">		</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">button;
</span><span class="jscript1-space">   </span><span class="jscript1-symbol">},

</span><span class="jscript1-space">    </span><span class="jscript1-non-reservedkeyword">clear:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(){
</span><span class="jscript1-space">             </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'br'</span><span class="jscript1-symbol">)).addClass(</span><span class="jscript1-string">'clear'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},

</span><span class="jscript1-space">    </span><span class="jscript1-identifier">div</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(style)</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'div'</span><span class="jscript1-symbol">)).css(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{zIndex:style.zIndex,width</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.width,height</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.height,left</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.left,top</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.top,
</span><span class="jscript1-space">            </span><span class="jscript1-identifier">backgroundImage:style.backgroundImage,backgroundColor:style.backgroundColor,position</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.position}).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.id}).addClass(style._class);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},

</span><span class="jscript1-space">    </span><span class="jscript1-non-reservedkeyword">form:</span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(param){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">form</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'form'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">param.id,action:param.action,method:</span><span class="jscript1-space"> </span><span class="jscript1-string">'post'</span><span class="jscript1-symbol">,enctype:param.enctype}).addClass(param._class);
</span><span class="jscript1-space">	</span><span class="jscript1-non-reservedkeyword">form.append(param.formContent);
</span><span class="jscript1-space">	</span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">form;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},

</span><span class="jscript1-space">    </span><span class="jscript1-identifier">button</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">return</span><span class="jscript1-space">  </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'button'</span><span class="jscript1-symbol">)).attr({TYPE:</span><span class="jscript1-string">'button'</span><span class="jscript1-symbol">,id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id}).addClass(p._class).append(p.content);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    
    </span><span class="jscript1-identifier">ul:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(p==</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{};
</span><span class="jscript1-space">       </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'ul'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id}).addClass(p._class);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    
    </span><span class="jscript1-identifier">li:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">         </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'li'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id}).addClass(p._class).append(p.content);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},
</span><span class="jscript1-space">    
    </span><span class="jscript1-identifier">img:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">    	 </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(p.src)</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">src</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.src;
</span><span class="jscript1-space">    	 </span><span class="jscript1-reservedword">else</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">src=</span><span class="jscript1-string">''</span><span class="jscript1-symbol">;
</span><span class="jscript1-space">         </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'img'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{src:src,id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id,alt:p.alt,width:p.width,height:p.height,title:p.title}).addClass(p._class);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},

</span><span class="jscript1-space">    </span><span class="jscript1-identifier">h1:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(p){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">$(document.createElement(</span><span class="jscript1-string">'h1'</span><span class="jscript1-symbol">)).attr(</span><span class="jscript1-space"> </span><span class="jscript1-symbol">{id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-identifier">p.id}).addClass(p._class).append(p.content);
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">},

</span><span class="jscript1-space">    </span><span class="jscript1-identifier">createGameItem</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">function</span><span class="jscript1-symbol">(style,p){
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm</span><span class="jscript1-space"> </span><span class="jscript1-symbol">=</span><span class="jscript1-space"> </span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.div({id</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.id,_class:style._class,width:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.width,</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">height:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.height,left:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.left,
</span><span class="jscript1-space">            </span><span class="jscript1-non-reservedkeyword">top:</span><span class="jscript1-space">  </span><span class="jscript1-non-reservedkeyword">style.top,zIndex:style.zIndex,position:style.position,backgroundColor</span><span class="jscript1-space"> </span><span class="jscript1-symbol">:</span><span class="jscript1-space"> </span><span class="jscript1-non-reservedkeyword">style.getBgColor()});
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">var</span><span class="jscript1-space"> </span><span class="jscript1-identifier">imagePath=style.getImagePath(</span><span class="jscript1-reservedword">false</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">        </span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(imagePath!=</span><span class="jscript1-reservedword">null</span><span class="jscript1-symbol">)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm.append(</span><span class="jscript1-reservedword">this</span><span class="jscript1-symbol">.img({src:imagePath,width:style.width,height:style.height,title:p.title}));
</span><span class="jscript1-space">    	</span><span class="jscript1-reservedword">if</span><span class="jscript1-symbol">(debug)</span><span class="jscript1-space"> </span><span class="jscript1-identifier">Log(</span><span class="jscript1-string">'** createGameItem imageName'</span><span class="jscript1-symbol">+style.imageName+</span><span class="jscript1-string">', width:'</span><span class="jscript1-symbol">+style.width+</span><span class="jscript1-string">', height:'</span><span class="jscript1-symbol">+style.height+</span><span class="jscript1-string">',imagesPath:'</span><span class="jscript1-symbol">+imagePath+</span><span class="jscript1-string">''
</span><span class="jscript1-space">    			 </span><span class="jscript1-symbol">+</span><span class="jscript1-string">',bgColor:'</span><span class="jscript1-symbol">+style.bgColor+</span><span class="jscript1-string">',id:'</span><span class="jscript1-symbol">+style.id+</span><span class="jscript1-string">',_class:'</span><span class="jscript1-symbol">+style._class,</span><span class="jscript1-string">'d'</span><span class="jscript1-symbol">);
</span><span class="jscript1-space">                     
        </span><span class="jscript1-reservedword">return</span><span class="jscript1-space"> </span><span class="jscript1-identifier">itm;
</span><span class="jscript1-space">    </span><span class="jscript1-symbol">}

};

</span></span>
</code></pre>
</body>
</html>